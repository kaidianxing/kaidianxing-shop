(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[122],{"0e62":function(e,t,a){},"0ed91":function(e,t,a){},1836:function(e,t,a){"use strict";var n=a("f66e");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"1d09":function(e,t,a){"use strict";a.r(t);var n=a("3ce3"),r=a("5f1d");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("4d13");var o=a("2877"),s=Object(o["a"])(r["default"],n["render"],n["staticRenderFns"],!1,null,"cbfdef4c",null);t["default"]=s.exports},"3ce3":function(e,t,a){"use strict";var n=a("adc0");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"4d13":function(e,t,a){"use strict";a("0ed91")},"5b95":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3"),a("d81d"),a("d3b7");var n={name:"TableList",props:{data:{type:Array,default:function(){return[]}},total:{type:Number,default:0}},data:function(){var e=this;this.$createElement;return{columns:[{title:"排序",key:"sort_order",width:100},{title:"展示图片",key:"img",slot:"showImg"},{title:"跳转链接",key:"url"},{title:"创建时间",key:"created_at"},{title:"操作",key:"action",width:200,render:function(t,a){return t("div",{class:"action"},[t("Button",{attrs:{type:"text",disabled:e.noManagePerm},on:{click:function(){e.$emit("tableEdit",a.row)}}},["编辑"]),t("Button",{attrs:{type:"text",disabled:e.noManagePerm||"1"==a.row.is_default},on:{click:function(){e.handleDelete(a.row)}}},["删除"])])}}]}},computed:{getTableData:function(){var e=this;return this.data.map((function(t){return t._disabled=e.noManagePerm,t}))},noManagePerm:function(){return!this.$getPermMap("pc.home-ads.manage")},isDisabled:function(){return 0===this.selectRows.length},selectHasDefault:function(){return this.selectRows.some((function(e){return"1"==e.is_default}))}},methods:{handleDelete:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"是否确认删除？",onOk:function(){t.$api.homeApi.advertiseDelete({id:e.id}).then((function(e){0===e.error&&(t.$Message.success("删除成功"),t.$emit("on-refresh"))})).catch()}})},initFooterData:function(){this.isSelectAll=!1,this.selectRows=[]}}};t.default=n},"5f1d":function(e,t,a){"use strict";a.r(t);var n=a("5b95"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},"643a":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("ade3")),i=n(a("5530"));a("d81d"),a("d9e2"),a("d3b7"),a("e9c4"),a("ac1f"),a("841c");var o=n(a("1d09")),s={name:"list",inject:["returnToTop"],components:{TableList:o.default},computed:{noManagePerm:function(){return!this.$getPermMap("pc.home-ads.manage")},getTableData:function(){var e=this;return this.table.data.map((function(t){return t._disabled=e.noManagePerm,t}))}},data:function(){return{modalShow:!1,modalTitle:"添加广告图",model:{name:"",img:"",url:"",sort_order:""},category:[],table:{data:[],loading:!1,total:0},rules:{name:[{required:!0,message:"请输入轮播名称"}],img:[{required:!0,message:"请输上传图片"}],url:[{required:!0,message:"请输入跳转链接"}],sort_order:[{required:!0,validator:function(e,t,a){t.length>4?a(new Error("最多为4位数")):t?a():a(new Error("请输入商品组排序"))}}]},optionData:{status:[{value:"all",name:"全部"},{value:"1",name:"启用"},{value:"0",name:"禁用"}]},page:{pageSize:20,pageNumber:1}}},methods:{changeThumb:function(e,t){this.$set(this.model,t,e)},validate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return new Promise((function(a){e.$refs["form"].validate((function(n){a(n),t(n),e.$nextTick((function(){if(!n)for(var t in e.cacheError)if(!e.cacheError[t]){e.$focusError(t);break}}))}))}))},handleSave:function(){var e=this;console.log(this.model,"model"),this.validate((function(t){if(t){var a="advertiseAdd";"编辑广告图"===e.modalTitle&&(a="advertiseEdit"),e.$api.homeApi[a](e.model).then((function(t){0===t.error&&(e.handleCancel(),e.$Message.success("操作成功"),e.getList())}))}}))},showSelect:function(){},onValidate:function(e,t){this.cacheError=(0,i.default)((0,i.default)({},this.cacheError),{},(0,r.default)({},e,t))},toAdd:function(){this.modalTitle="添加广告图",this.model={name:"",img:"",url:"",sort_order:""},this.$refs.form.resetFields(),this.modalShow=!0},tableEdit:function(e){this.modalTitle="编辑广告图",this.model=JSON.parse(JSON.stringify(e)),this.modalShow=!0},handleCancel:function(){this.modalShow=!1},setStatus:function(e){this.search.status=e},handleSearch:function(){this.refreshTable()},refreshTable:function(e){e||(this.page={pageSize:10,pageNumber:1}),this.getList()},changePage:function(e){this.page=e,this.getList()},getList:function(){var e=this;this.returnToTop(),this.table.loading=!0,this.$api.homeApi.advertiseList({}).then((function(t){e.table.loading=!1,0===t.error&&(e.table.data=t.list,e.table.total=t.total)})).catch()}},mounted:function(){var e=this;this.$history.setRoute(this.$route).getData((function(t){var a=t.search,n=t.page;e.search=e.$utils.deepCopy(a)||e.search,e.page=n,e.$nextTick((function(){e.refreshTable(e.page)}))}))}};t.default=s},"7e2c":function(e,t,a){"use strict";a("0e62")},adc0:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"good-group-table-list"},[t("Table",{ref:"table",attrs:{columns:e.columns,data:e.getTableData},scopedSlots:e._u([{key:"showImg",fn:function(a){var n=a.row;return[t("img",{staticClass:"advImg",attrs:{src:e.$media(n.img),alt:""}})]}}])}),t("div",{staticClass:"footer-page"})],1)};t.render=a;var n=[];t.staticRenderFns=n},b1fa:function(e,t,a){"use strict";a.r(t);var n=a("643a"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},f61f:function(e,t,a){"use strict";a.r(t);var n=a("1836"),r=a("b1fa");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("7e2c");var o=a("2877"),s=Object(o["a"])(r["default"],n["render"],n["staticRenderFns"],!1,null,"4c3137f2",null);t["default"]=s.exports},f66e:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"good-label"},[t("kdx-header-bar",{scopedSlots:e._u([{key:"header",fn:function(){return[t("Button",{attrs:{type:"primary",disabled:e.noManagePerm},on:{click:e.toAdd}},[e._v("添加广告图")])]},proxy:!0}])}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],staticClass:"table-list"},[t("table-list",{ref:"table_list",attrs:{data:e.getTableData,total:e.table.total},on:{"on-refresh":e.getList,"on-page-change":e.changePage,tableEdit:e.tableEdit}})],1),t("kdx-modal-frame",{attrs:{value:e.modalShow,title:e.modalTitle,width:"750","ok-text":"保存"},on:{"on-ok":e.handleSave,"on-cancel":e.handleCancel}},[t("Form",{ref:"form",staticClass:"content",attrs:{model:e.model,rules:e.rules,"label-width":140}},[t("div",{staticClass:"modal-box"},[t("FormItem",{attrs:{label:"banner名称：",prop:"name"}},[t("Input",{staticClass:"width-300",attrs:{disabled:e.noManagePerm,placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),t("FormItem",{attrs:{label:"广告图片：",prop:"img"}},[t("kdx-image-video",{staticClass:"bannerImg",attrs:{type:"image",current:e.model.img},on:{"on-change":function(t){return e.changeThumb(t,"img")}}})],1),t("FormItem",{attrs:{label:"图片跳转链接：",prop:"url"}},[t("Input",{staticClass:"width-300",attrs:{placeholder:"请填写跳转pc页面的访问路径"},model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}})],1),t("FormItem",{attrs:{label:"广告排序：",prop:"sort_order"}},[t("Input",{staticClass:"width-300",attrs:{type:"number",placeholder:"请输入"},model:{value:e.model.sort_order,callback:function(t){e.$set(e.model,"sort_order",t)},expression:"model.sort_order"}})],1)],1)])],1),e._t("default")],2)};t.render=n;var r=[];t.staticRenderFns=r}}]);