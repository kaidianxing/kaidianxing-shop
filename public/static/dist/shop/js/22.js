(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"0786":function(t,e,i){"use strict";i.r(e);var a=i("a162"),o=i("fad2");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("e8b9");var n=i("2877"),d=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"daf11166",null);e["default"]=d.exports},"150b":function(t,e,i){t.exports=i.p+"static/dist/shop/img/material-bottom1.png"},"1a3f":function(t,e,i){},3384:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"Preview",props:{model:{type:Object,default:function(){}}},data:function(){return{previewTop:i("6c86"),previewBottom:i("150b")}},methods:{}};e.default=a},"3cfc0":function(t,e,i){"use strict";i("1a3f")},"6c86":function(t,e,i){t.exports=i.p+"static/dist/shop/img/material-top.png"},9488:function(t,e,i){"use strict";i.r(e);var a=i("a793"),o=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=o.a},a162:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return o}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"preview-index"},[i("div",{staticClass:"preview-title"},[t._v("æŽ¨å¹¿é¢„è§ˆ")]),i("div",{staticClass:"preview-box"},[i("div",{staticClass:"content"},[i("img",{attrs:{src:t.previewTop,alt:""}}),i("div",{staticClass:"text-wrap"},[i("div",{staticClass:"text"},[i("div",{staticClass:"description"},[t._v(t._s("0"===t.model.description_type?"ðŸ“¢ çŽ°åœ¨ä¸‹å•è¶…åˆ’ç®—ï¼Œèµ¶ç´§ä¸‹å•":t.model.description))]),"0"===t.model.description_type?i("div",{staticClass:"goods"},[t._v("ðŸ‘ è¡¬è¡«ç”·å¥³é•¿è¢–å¤å­£æ—¥ç³»insé£Žæ–‡è‰ºè–„æ¬¾äºšéº»æ¸¯é£Žç”·å£«å¥³å£«å°æ¸…æ–°æ£‰éº»æ¡çº¹ç™½è¡¬å¥³å£«")]):t._e(),i("div",{staticClass:"item"},[t._v("ðŸ’° ï¿¥50.99")]),i("div",{staticClass:"item"},[t._v("ðŸ‘‰ è´­ä¹°é“¾æŽ¥ï¼š#å°ç¨‹åº://åŽæœ´å•†åŸŽ/å•†å“/M1Ytw4mg7r7nB3a")])])]),i("img",{attrs:{src:t.previewBottom,alt:""}})])])])},o=[]},a793:function(t,e,i){var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var o=a(i("1da1")),s=a(i("5530"));i("a4d3"),i("e01a"),i("e9c4"),i("d3b7"),i("ac1f"),i("5319");var n=a(i("0786")),d=a(i("0659")),r=a(i("416b")),l={components:{preview:n.default,shopNamePageList:r.default,GoodsSelector:d.default},data:function(){var t=this;return{id:"",type:"",model:{goods_id:"",goods:{},description_type:"0",description:"",material_type:"0",thumb_all:[],video:"",video_thumb:""},rule:{goods:[{required:!0,validator:function(e,i,a){t.model.goods_id?a():a(new Error("è‡³å°‘é€‰æ‹©ä¸€ä¸ªå•†å“"))}}],description_type:[{required:!0,message:"è¯·é€‰æ‹©æŽ¨å¹¿æ–‡æ¡ˆ"}],description:[{required:!0,message:"è¯·è¾“å…¥æŽ¨å¹¿æ–‡æ¡ˆ"}],material_type:[{required:!0,validator:function(e,i,a){0==t.model.material_type&&0===t.model.thumb_all.length||1==t.model.material_type&&!t.model.video?a(new Error("è¯·é€‰æ‹©ç´ æ")):a()}}]},loading:!1,selector:{modal:!1}}},mounted:function(){var t,e,i,a;this.type=null===(t=this.$route)||void 0===t||null===(e=t.meta)||void 0===e?void 0:e.type,this.id=(null===(i=this.$route)||void 0===i||null===(a=i.query)||void 0===a?void 0:a.id)||"","edit"===this.type&&this.id&&this.getDetail()},computed:{noManagePerm:function(){return!this.$getPermMap("material.index.manage")}},methods:{getDetail:function(){var t=this;this.$api.materialApi.getMaterialInfo({id:this.id}).then((function(e){if(0===e.error){var i=e.data,a=i.goods_id,o=i.description_type,s=i.description,n=i.material_type,d=i.thumb_all,r=i.video,l=i.video_thumb;d=JSON.parse(d);var c={id:e.data.goods_id,category:e.data.goods_category,has_option:e.data.goods_has_option,thumb:e.data.goods_thumb,title:e.data.goods_title,type:e.data.goods_type};t.model={goods_id:a,description_type:o,description:s,material_type:n,thumb_all:d,video:r,video_thumb:l,goods:c}}}))},addShop:function(){this.selector.modal=!0},handleDelete:function(){this.model.goods={},this.model.goods_id=""},selectorChange:function(t){var e=this;this.model.goods=(0,s.default)({},t),this.model.goods_id=t.id,this.$refs["goods_id"].validateState="",this.$nextTick((function(){var t;null===(t=e.$refs["shop_name_list"])||void 0===t||t.reset()})),this.selectorCancel()},selectorCancel:function(){this.selector.modal=!1},thumbAllChange:function(t){this.model.thumb_all=t},changeVideo:function(t){this.model.video=t.path},changeVideoImage:function(t){this.model.video_thumb=t},handleSave:function(){var t=this;return(0,o.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$refs["form"].validate().then((function(e){if(e){t.loading=!0;var i=(0,s.default)({},t.model);i["thumb_all"]=JSON.stringify(i["thumb_all"]),i["goods"]=JSON.stringify(i["goods"]);var a="addMaterial";"edit"===t.type&&(a="editMaterial",i["id"]=t.id),t.$api.materialApi[a](i).then((function(e){0===e.error&&(t.$Message.success("ä¿å­˜æˆåŠŸ"),t.$router.replace({path:"/material/list"}))})).finally((function(){t.loading=!1}))}}));case 1:case"end":return e.stop()}}),e)})))()}}};e.default=l},a81c:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return o}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex activity-add-wrap"},[i("preview",{attrs:{model:t.model}}),i("div",{staticClass:"right"},[i("kdx-content-bar",{staticClass:"content-bar-right",scopedSlots:t._u([{key:"btn",fn:function(){return[i("Button",{staticClass:"primary-long",attrs:{type:"primary",loading:t.loading,disabled:t.noManagePerm},on:{click:t.handleSave}},[t._v("ä¿å­˜")]),i("Button",{staticClass:"default-long",attrs:{to:"/material/list"}},[t._v("å–æ¶ˆ")])]},proxy:!0}])},[i("kdx-hint-alert",{staticStyle:{"margin-bottom":"10px"}},[i("div",{staticClass:"flex"},[i("div",{staticStyle:{"white-space":"nowrap"}},[t._v("æç¤ºï¼š")]),i("div",[i("p",[t._v("æœ‹å‹åœˆæŽ¨å¹¿å°ç¨‹åº/å…¬ä¼—å·/H5æ¸ é“ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆç”Ÿæˆå°ç¨‹åºçŸ­é“¾ï¼ˆShort Linkï¼‰ï¼Œå¾®ä¿¡çŽ¯å¢ƒå†…æ— éœ€é—®è¯¢å¯ç›´æŽ¥å”¤èµ·å°ç¨‹åºã€‚")]),i("p",[t._v("éœ€è¦å¾®ä¿¡å°ç¨‹åºæ‹¥æœ‰ä»¥ä¸‹ä¸€çº§ç±»ç›®ï¼šç”µå•†å¹³å°ã€å•†å®¶è‡ªè¥ã€è·¨å¢ƒç”µå•†ï¼Œä¸ç¬¦å’Œæ¡ä»¶æ—¶ä¼šè‡ªåŠ¨è½¬ä¸ºURL Linkï¼ˆå¦ä¸€ç§å°ç¨‹åºé“¾æŽ¥å½¢å¼ï¼Œæ‰“å¼€æ—¶ä¼šè·³è½¬ä¸­é—´é¡µï¼‰")]),i("p",[t._v("ç”±äºŽå¸¦å‚æ•°çš„å°ç¨‹åºé“¾æŽ¥ï¼ˆShort Linkï¼‰æ°¸ä¹…é“¾æŽ¥ä¸Šé™æ˜¯ 10 ä¸‡æ¡ï¼Œç›®å‰é»˜è®¤ç”Ÿæˆä¸´æ—¶é“¾æŽ¥ï¼Œç”Ÿæˆæ•°é‡ä¸å—é™åˆ¶ï¼Œä½†æ˜¯ä¸´æ—¶é“¾æŽ¥ç”ŸæˆåŽæœ‰æ•ˆæ—¶é•¿ä¸º 30 å¤©ï¼Œå¤±æ•ˆåŽéœ€è¦é‡æ–°ç”Ÿæˆå†ä½¿ç”¨ï¼Œåœ¨æ–°çš„åœºæ™¯ä½¿ç”¨æ—¶å»ºè®®é‡æ–°ç”ŸæˆåŽä½¿ç”¨ã€‚")])])])]),i("div",{staticClass:"content"},[i("Form",{ref:"form",staticClass:"form",attrs:{model:t.model,"label-width":120,rules:t.rule}},[i("kdx-form-title",{staticClass:"price-settings"},[t._v("æŽ¨å¹¿è®¾ç½®")]),i("FormItem",{ref:"goods_id",attrs:{label:"é€‰æ‹©å•†å“ï¼š",prop:"goods"}},[i("div",{staticClass:"next-box"},[i("Button",{staticClass:"default-primary",on:{click:t.addShop}},[t._v(t._s(t.model.goods_id?"é‡æ–°é€‰æ‹©å•†å“":"+æ·»åŠ å•†å“"))]),t.model.goods_id?i("div",{staticClass:"shop-list-box"},[i("shop-name-page-list",{ref:"shop_name_list",attrs:{list:[Object.assign({},t.model.goods)]},on:{"on-delete":t.handleDelete}})],1):t._e()],1)]),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"æŽ¨å¹¿æ–‡æ¡ˆï¼š",prop:"description_type"}},[i("RadioGroup",{model:{value:t.model.description_type,callback:function(e){t.$set(t.model,"description_type",e)},expression:"model.description_type"}},[i("Radio",{attrs:{label:"0"}},[t._v("ç³»ç»Ÿé»˜è®¤")]),i("Radio",{attrs:{label:"1"}},[t._v("è‡ªå®šä¹‰")])],1),i("kdx-hint-text",{staticClass:"hint-margin"},[t._v(" ç³»ç»Ÿé»˜è®¤æ–‡æ¡ˆä¸ºå·¦ä¾§é¢„è§ˆå›¾ä¸­æ˜¾ç¤ºï¼Œå•†å“æ ‡é¢˜ã€å•†å“ä»·æ ¼è¯»å–å•†å“è®¾ç½®ä¸å¯ä¿®æ”¹ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå°ç¨‹åºçŸ­é“¾ ")]),"0"!==t.model.description_type?i("div",{staticClass:"next-box"},[i("FormItem",{staticClass:"margin-l",attrs:{label:"æŽ¨å¹¿æ–‡æ¡ˆï¼š",prop:"description"}},[i("Input",{staticClass:"width-520 limit-input",attrs:{type:"textarea",rows:4,maxlength:"1000","show-word-limit":"",placeholder:"è¯·è¾“å…¥æŽ¨å¹¿æ–‡æ¡ˆ"},model:{value:t.model.description,callback:function(e){t.$set(t.model,"description",e)},expression:"model.description"}}),i("kdx-hint-text",{staticClass:"hint-margin",staticStyle:{"margin-left":"120px"}},[t._v("æ‚¨å¯ä»¥è‡ªå®šä¹‰ä¸ªæ€§åŒ–æ–‡æ¡ˆï¼Œä¸å†è¯»å–å•†å“æ ‡é¢˜ä¿¡æ¯ï¼Œæ”¯æŒemojè¡¨æƒ…åŒ…")])],1)],1):t._e()],1),i("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"ä¸Šä¼ ç´ æï¼š",prop:"material_type"}},[i("RadioGroup",{model:{value:t.model.material_type,callback:function(e){t.$set(t.model,"material_type",e)},expression:"model.material_type"}},[i("Radio",{attrs:{label:"0"}},[t._v("å›¾ç‰‡")]),i("Radio",{attrs:{label:"1"}},[t._v("è§†é¢‘")])],1),i("div",{staticClass:"next-box"},[0==t.model.material_type?[i("kdx-image-video",{staticClass:"swiper-img",attrs:{type:"image",limit:9,multiple:!0,"current-list":t.model.thumb_all,"is-drag":""},on:{"on-change":t.thumbAllChange}}),i("div",{staticClass:"flex"},[i("kdx-hint-text",{attrs:{content:"å»ºè®®å°ºå¯¸ï¼š750*750åƒç´ ï¼Œå¯ä»¥æ‹–æ‹½å›¾ç‰‡è°ƒæ•´é¡ºåºï¼Œæœ€å¤šä¸Šä¼ 9å¼ "}})],1)]:[i("kdx-image-video",{staticStyle:{"padding-bottom":"10px"},attrs:{type:"video",video:t.model.video,current:t.model.video_thumb},on:{"on-video-change":t.changeVideo,"on-change":t.changeVideoImage}}),i("div",{staticClass:"flex"},[i("kdx-hint-text",{attrs:{content:"ä»…å°ç¨‹åºæ¸ é“æ”¯æŒä¸€é”®ä¿å­˜è§†é¢‘ï¼Œå»ºè®®è§†é¢‘çªå‡ºå•†å“æ ¸å¿ƒå–ç‚¹ï¼Œæ—¶é•¿9ï½ž30ç§’ï¼Œå®½é«˜æ¯”16:9"}})],1)]],2)],1)],1)],1)],1),i("goods-selector",{attrs:{current:t.model.goods,show_material:1,multiple:!1},on:{"on-change":t.selectorChange,"on-cancel":t.selectorCancel},model:{value:t.selector.modal,callback:function(e){t.$set(t.selector,"modal",e)},expression:"selector.modal"}})],1)],1)},o=[]},a8f3:function(t,e,i){},bc3c:function(t,e,i){"use strict";i.r(e);var a=i("a81c"),o=i("9488");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("3cfc0");var n=i("2877"),d=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"0e361736",null);e["default"]=d.exports},e8b9:function(t,e,i){"use strict";i("a8f3")},fad2:function(t,e,i){"use strict";i.r(e);var a=i("3384"),o=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=o.a}}]);