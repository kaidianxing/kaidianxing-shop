(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[74],{"014d":function(e,t,a){},"051a0":function(e,t,a){"use strict";a("014d")},1975:function(e,t,a){"use strict";a("b435")},"1b08":function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a("c7eb")),i=n(a("5530")),r=n(a("1da1")),l=a("2f62"),o={props:["type"],data:function(){return{showModalFlag:!1,modalTitle:"",modalType:"",modelValue:0,deliveryType:{express:0}}},computed:{noManagePerm:function(){return!this.$getPermMap("order.dispatch.manage")}},created:function(){var e=this;return(0,r.default)((0,s.default)().mark((function t(){var a;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getDispatchEnable();case 2:a=t.sent,e.deliveryType=(0,i.default)({},a),"ordinaryExpress"===e.type?e.modelValue=(null===a||void 0===a?void 0:a.express)||0:"samecityDelivery"===e.type&&(e.modelValue=(null===a||void 0===a?void 0:a.intracity)||0);case 5:case"end":return t.stop()}}),t)})))()},methods:(0,i.default)((0,i.default)({},(0,l.mapActions)("goodAddEdit",["getDispatchEnable"])),{},{showModal:function(){this.modalTitle="运费模板说明",this.modalType="description",this.showModalFlag=!0},handleChange:function(e){var t=this;if("ordinaryExpress"===this.type){if(0===e&&0===this.deliveryType.intracity)return this.modalTitle="系统提示",this.modalType="tips",this.showModalFlag=!0,void this.$nextTick((function(){t.modelValue=1}));this.enableExpress()}else if("samecityDelivery"===this.type){if(0===e&&0===this.deliveryType.express)return this.modalTitle="系统提示",this.modalType="tips",this.showModalFlag=!0,void this.$nextTick((function(){t.modelValue=1}));this.$emit("change",e)}},enableExpress:function(){var e=this;this.$api.orderApi.enableExpress({enable:this.modelValue}).then((function(t){0===t.error&&e.$Message.success("修改成功")}))},enableIntracity:function(e){var t=this;this.$api.orderApi.enableIntracity({enable:e}).then((function(e){0===e.error&&t.$Message.success("修改成功")}))}})};t.default=o},"1c1e":function(e,t,a){"use strict";var n=a("74bdc");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"203d":function(e,t,a){"use strict";a.r(t);var n=a("3be7"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},2859:function(e,t,a){"use strict";a.r(t);var n=a("1c1e"),s=a("203d");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(i);var r=a("2877"),l=Object(r["a"])(s["default"],n["render"],n["staticRenderFns"],!1,null,null,null);t["default"]=l.exports},2970:function(e,t,a){"use strict";a.r(t);var n=a("3a5a"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},3995:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"comp-delivery-type"},[t("div",{staticClass:"flex align-center space-between"},[t("div",{staticClass:"left"},[t("div",{staticClass:"flex left-box"},["ordinaryExpress"===e.type?t("div",{staticClass:"name"},[e._v(" 普通快递 ")]):e._e(),"samecityDelivery"===e.type?t("div",{staticClass:"name"},[e._v(" 同城配送 ")]):e._e(),t("div",{staticClass:"right",staticStyle:{"margin-left":"16px"}},[t("i-switch",{attrs:{"true-value":1,"false-value":0,disabled:e.noManagePerm},on:{"on-change":e.handleChange},model:{value:e.modelValue,callback:function(t){e.modelValue=t},expression:"modelValue"}}),t("div",{staticClass:"text",class:{active:1===e.modelValue}},[e._v(" "+e._s(1===e.modelValue?"已开启":"已关闭")+" ")])],1)]),"ordinaryExpress"===e.type?t("div",{staticClass:"tips"},[e._v(" 启用后，买家下单可以选择快递发货，由商家安排快递送货上门。 "),t("span",{on:{click:e.showModal}},[e._v(" 【运费计算规则】 ")])]):e._e(),"samecityDelivery"===e.type?t("div",{staticClass:"tips"},[e._v(" 启用同城配送后，在配送范围内的买家可以选择同城配送，商家可以接入第三方配送，也可以自己配送。 ")]):e._e()])]),t("kdx-modal-frame",{attrs:{title:e.modalTitle,footerHide:!0},on:{"on-cancel":function(t){e.showModalFlag=!1}},model:{value:e.showModalFlag,callback:function(t){e.showModalFlag=t},expression:"showModalFlag"}},["description"===e.modalType?t("div",{staticClass:"modal-frame-content"},[t("div",{staticClass:"title"},[e._v("组合运费")]),t("ul",[t("li",[t("div",{staticClass:"item-title"},[e._v(" 1. 不同商品设置同一运费模板： "),t("span",[e._v("【相关所有商品按该模板设置的规则计算】")])]),t("div",{staticClass:"item-content"},[t("div",{staticClass:"flex"},[t("div",{staticClass:"left note"},[e._v("注意")]),t("div",{staticClass:"right"},[e._v(" 不足续件或者续重的数目的时候，仍然按照续件或者续重的数目进行计算 ")])]),t("div",{staticClass:"flex"},[t("div",{staticClass:"left example"},[e._v("例子")]),t("div",{staticClass:"right"},[e._v(" 商品A，B都是用模板M（首3件10块，续2件5块）"),t("br"),e._v(" 同时购买商品2件A和2件B"),t("br"),e._v(" 运费=模板M的运费=10+5=15元 ")])])])]),t("li",[t("div",{staticClass:"item-title"},[e._v(" 2. 多种商品，分别设置不同金额的统一运费： "),t("span",[e._v("【以最高运费金额收取】")])]),t("div",{staticClass:"item-content"},[t("div",{staticClass:"flex"},[t("div",{staticClass:"left note"},[e._v("注意")]),t("div",{staticClass:"right"},[e._v(" 不足续件或者续重的数目的时候，仍然按照续件或者续重的数目进行计算 ")])]),t("div",{staticClass:"flex"},[t("div",{staticClass:"left example"},[e._v("例子")]),t("div",{staticClass:"right"},[e._v(" 商品E，F，G的统一运费分别为1元，2元和3元"),t("br"),e._v(" 同时购买E，F，G商品 ， 运费=最大统一运费=3元 ")])])])]),t("li",[t("div",{staticClass:"item-title"},[e._v(" 3. 不同商品设置不同的运费模板： "),t("span",[e._v("【先计算Max首费模板运费+其他模板续费】")])]),t("div",{staticClass:"item-content"},[t("div",{staticClass:"flex"},[t("div",{staticClass:"left note"},[e._v("注意")]),t("div",{staticClass:"right"},[t("span",[e._v("Max首费计算规则")]),t("br"),e._v(" 1.先对比首费，取最大首费模板"),t("br"),e._v(" 2.首费一样时对比首费平均值，取最大首费平均值"),t("br"),e._v(" 3.首费平均值一样时，对比续费，取最大续费"),t("br"),e._v(" 4.续费一样时对比续费平均值，取最大续费平均值 ")])]),t("div",{staticClass:"flex"},[t("div",{staticClass:"left example"},[e._v("例子")]),t("div",{staticClass:"right"},[e._v(" 商品C（1kg）使用用模板N（首1kg，10块，续2kg，5块），商品D（0.5kg）使用模板O（首2kg，12块，续1kg，5块），"),t("br"),e._v(" 同时购买商品（2kg）C和（1kg）D ，运费=模板O的运费+模板N的续费=（12）+（5）=17元 ")])])])]),t("li",[t("div",{staticClass:"item-title"},[e._v(" 4. 统一运费商品和运费模板商品一同结算： "),t("span",[e._v(" 【单独计算统一运费商品应收运费，再累加运费模板应收运费】 ")])]),t("div",{staticClass:"item-content"},[t("div",{staticClass:"flex"},[t("div",{staticClass:"left example"},[e._v("例子")]),t("div",{staticClass:"right"},[e._v(" 同时购买商品2件A和2件B + （2kg）C和（1kg）D + E，F，G"),t("br"),e._v(" 运费=最大统一运费+模板O的运费+模板N的续费+模板M的续费=3+（12）+（5）+（5*2）=30元 ")])])])])])]):e._e(),"tips"===e.modalType?t("div",{staticClass:"modal-frame-content"},[t("div",{staticClass:"modal-frame-content-tips"},[e._v(" 需要开启快递发货店铺才能正常运营。 ")])]):e._e()])],1)};t.render=a;var n=[];t.staticRenderFns=n},"3a5a":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3"),a("b680"),a("14d9"),a("d81d"),a("d3b7"),a("159b");var n={name:"TableList",props:{data:{type:Array,default:function(){return[]}},total:{type:Number,default:0}},data:function(){var e=this;this.$createElement;return{updateShopNameIndex:-1,columns:[{type:"selection",width:40,align:"center"},{title:"排序",key:"sort",width:80},{title:"名称",key:"dispatch_name",minWidth:120,render:function(e,t){var a;return"1"==t.row.is_default&&(a=e("kdx-tag-label",{attrs:{type:"info",size:"small"}},["默认"])),e("div",{class:"ordinary-express-name"},[e("span",[t.row[t.column.key]]),a])}},{title:"计费方式",key:"calculate_type",minWidth:100,render:function(e,t){return"0"==t.row[t.column.key]?e("kdx-tag-label",{attrs:{type:"warning",size:"small"}},["按重计费"]):"1"==t.row[t.column.key]?e("kdx-tag-label",{attrs:{type:"success",size:"small"}},["按件计费"]):void 0}},{title:"首(重/件)价格",key:"first_price",minWidth:90,render:function(e,t){var a;return"0"==t.row.calculate_type?a=t.row.start_weight_price:"1"==t.row.calculate_type&&(a=t.row.start_num_price),a=a?"￥".concat(parseFloat(a).toFixed(2)):"-",e("div",[a])}},{title:"续(重/件)价格",key:"price",minWidth:90,render:function(e,t){var a;return"0"==t.row.calculate_type?a=t.row.add_weight_price:"1"==t.row.calculate_type&&(a=t.row.add_num_price),a=a?"￥".concat(parseFloat(a).toFixed(2)):"-",e("div",[a])}},{title:"状态",key:"state",minWidth:80,render:function(e,t){return"0"==t.row[t.column.key]?e("kdx-status-text",{attrs:{type:"disabled"}},["未启用"]):"1"==t.row[t.column.key]?e("kdx-status-text",{attrs:{type:"success"}},["启用"]):void 0}},{title:"操作",key:"action",minWidth:120,render:function(t,a){var n,s;return s="1"!=a.row.is_default?t("Button",{attrs:{disabled:e.noManagePerm,type:"text"},on:{click:function(){e.setDefault(a.row.id,"1")}}},["设置默认"]):t("Button",{attrs:{disabled:e.noManagePerm,type:"text"},on:{click:function(){e.setDefault(a.row.id,"0")}}},["取消默认"]),"0"==a.row.state?n=t("Button",{attrs:{disabled:e.noManagePerm,type:"text"},on:{click:function(){e.setStatus({id:a.row.id,type:"start",status:"1"})}}},["启用"]):"1"==a.row.state&&(n=t("Button",{attrs:{disabled:e.noManagePerm,type:"text"},on:{click:function(){e.setStatus({id:a.row.id,type:"close",status:"0"})}}},["禁用"])),t("div",{class:"action"},[s,n,t("Button",{attrs:{disabled:e.noManagePerm,type:"text"},on:{click:function(){e.$router.push({path:"/order/ordinary-express/edit",query:{id:a.row.id}})}}},["编辑"]),t("Button",{attrs:{disabled:e.noManagePerm,type:"text"},on:{click:function(){e.handleDelete({id:a.row.id})}}},["删除"])])}}],selectRows:[],isSelectAll:!1}},computed:{getData:function(){var e=this;return this.data.map((function(t){return t._disabled=e.noManagePerm,t}))},selectDisabled:function(){return 0===this.selectRows.length},noManagePerm:function(){return!this.$getPermMap("order.dispatch.manage")}},methods:{handlePageChange:function(e){this.$emit("on-page-change",e)},selectChange:function(e){this.selectRows=e,this.isSelectAll=this.selectRows.length===this.data.length},checkboxChange:function(e){var t=this;this.$refs["table"].selectAll(e),this.data.forEach((function(a,n){t.$set(t.data[n],"_checked",e)})),this.selectRows=e?this.data:[]},handleDelete:function(e){var t=this,a=e.type,n=e.id;this.$Modal.confirm({title:"提示",content:"确认彻底删除此快递模版？",onOk:function(){var e;e=a&&"multiple"===a?t.selectRows.map((function(e){return e.id})):[n],t.$api.orderApi.deleteExpressStyle({ids:e}).then((function(e){0===e.error&&(t.$Message.success("快递模板删除成功"),t.$emit("on-refresh"))}))},onCancel:function(){}})},setStatus:function(e){var t,a,n=e.type,s=e.status,i=e.id;"start"===n?t="确认启用模板？":"close"===n&&(t="确认禁用模板?"),a=i?[i]:this.selectRows.map((function(e){return e.id})),this.setTemplateStatus(a,s,t)},setTemplateStatus:function(e,t,a){var n=this;this.$Modal.confirm({title:"提示",content:a,onOk:function(){n.$api.orderApi.setExpressStyleState({ids:e,state:t}).then((function(e){0===e.error&&(n.$Message.success("快递模板状态修改成功"),n.$emit("on-refresh"))}))},onCancel:function(){}})},setDefault:function(e,t){var a=this;this.$api.orderApi.setExpressStyleDefault({id:e,is_default:t}).then((function(e){0===e.error&&(a.$Message.success("快递模板默认设置成功"),a.$emit("on-refresh"))}))},reset:function(e){this.$refs["page"].reset(e),this.initFooterData()},initFooterData:function(){this.isSelectAll=!1,this.selectRows=[]}}};t.default=n},"3be7":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"SearchHeader",data:function(){return{model:{state:"all",keyword:""},optionData:{status:[{id:"all",name:"全部"},{id:"1",name:"启用"},{id:"0",name:"禁用"}]}}},computed:{noManagePerm:function(){return!this.$getPermMap("order.dispatch.manage")}},methods:{handleSearch:function(){var e=Object.assign({},this.model);e.state="all"===e.state?"":e.state,this.$emit("on-search",e)},handleReset:function(){this.$emit("on-search",{}),this.reset()},reset:function(e){this.model={state:(null===e||void 0===e?void 0:e.state)||"all",keyword:(null===e||void 0===e?void 0:e.keyword)||""}}}};t.default=a},"401d":function(e,t,a){},4089:function(e,t,a){"use strict";a.r(t);var n=a("d472"),s=a("d7e8");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(i);a("d0b6");var r=a("2877"),l=Object(r["a"])(s["default"],n["render"],n["staticRenderFns"],!1,null,"0f793d16",null);t["default"]=l.exports},"6ad9":function(e,t,a){"use strict";var n=a("9f16");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},7353:function(e,t,a){"use strict";a.r(t);var n=a("7aa3"),s=a("2970");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(i);a("1975");var r=a("2877"),l=Object(r["a"])(s["default"],n["render"],n["staticRenderFns"],!1,null,null,null);t["default"]=l.exports},"74bdc":function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0,a("b0c0");var n=function(){var e=this,t=e._self._c;return t("kdx-header-bar",{attrs:{type:"little"},scopedSlots:e._u([{key:"header",fn:function(){return[t("Button",{attrs:{disabled:e.noManagePerm,type:"primary",to:"/order/ordinary-express/add"}},[e._v("+添加快递模版")])]},proxy:!0}])},[t("Form",{attrs:{"label-width":100,model:e.model,inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[t("FormItem",{attrs:{label:"关键词："}},[t("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"模板名称"},on:{"on-enter":e.handleSearch},model:{value:e.model.keyword,callback:function(t){e.$set(e.model,"keyword",t)},expression:"model.keyword"}})],1),t("FormItem",{attrs:{label:"状态："}},[t("Select",{staticClass:"width-160",model:{value:e.model.state,callback:function(t){e.$set(e.model,"state",t)},expression:"model.state"}},e._l(e.optionData.status,(function(a){return t("Option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.name))])})),1)],1),t("div",{staticClass:"ivu-form-item-btn"},[t("Button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),t("Button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)};t.render=n;var s=[];t.staticRenderFns=s},"7aa3":function(e,t,a){"use strict";var n=a("bc03");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"7ef0":function(e,t,a){"use strict";a.r(t);var n=a("6ad9"),s=a("8308");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(i);a("051a0");var r=a("2877"),l=Object(r["a"])(s["default"],n["render"],n["staticRenderFns"],!1,null,"e4a61e4e",null);t["default"]=l.exports},8308:function(e,t,a){"use strict";a.r(t);var n=a("8767"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},8767:function(e,t,a){var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ac1f"),a("841c"),a("4e82");var s=n(a("2859")),i=n(a("7353")),r=n(a("4089")),l={name:"index",inject:["returnToTop"],components:{SearchHeader:s.default,TableList:i.default,DeliveryType:r.default},data:function(){return{search:{},table:{data:[],total:0,loading:!1},page:{pageSize:10,pageNumber:1}}},methods:{handleSearch:function(e){this.search=e,this.refreshTable()},getList:function(){var e=this;this.returnToTop(),this.table.loading=!0;var t=Object.assign({pagesize:this.page.pageSize,page:this.page.pageNumber},this.search,this.sort);this.$history.setData({page:this.page,search:this.search}),this.$api.orderApi.getExpressStyleList(t).then((function(t){e.table.loading=!1,0===t.error&&(e.table.data=t.list,e.table.total=t.total)}))},refreshTable:function(e){var t;e||(this.page={pageSize:10,pageNumber:1}),null===(t=this.$refs["table"])||void 0===t||t.reset(e),this.getList()},changePage:function(e){this.page=e,this.getList()}},mounted:function(){var e=this;this.$history.setRoute(this.$route).getData((function(t){var a=t.page,n=t.search;e.search=n||{},e.page=a,e.refreshTable(a),e.$nextTick((function(){e.$refs["search_header"].reset(e.search)}))}))}};t.default=l},"9f16":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ordinary-express"},[t("delivery-type",{attrs:{type:"ordinaryExpress"}}),t("search-header",{ref:"search_header",on:{"on-search":e.handleSearch}}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],staticClass:"table-list"},[t("table-list",{ref:"table",attrs:{data:e.table.data,total:e.table.total},on:{"on-page-change":e.changePage,"on-refresh":e.refreshTable}})],1),e._t("default")],2)};t.render=a;var n=[];t.staticRenderFns=n},b435:function(e,t,a){},bc03:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"good-list-table-list"},[t("Table",{ref:"table",attrs:{columns:e.columns,data:e.getData},on:{"on-selection-change":e.selectChange}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.data.length>0,expression:"data.length > 0"}],staticClass:"footer-action"},[t("Checkbox",{attrs:{disabled:e.noManagePerm},on:{"on-change":e.checkboxChange},model:{value:e.isSelectAll,callback:function(t){e.isSelectAll=t},expression:"isSelectAll"}}),t("Button",{attrs:{disabled:e.selectDisabled},on:{click:function(t){return e.setStatus({type:"start",status:"1"})}}},[e._v("启用")]),t("Button",{attrs:{disabled:e.selectDisabled},on:{click:function(t){return e.setStatus({type:"close",status:"0"})}}},[e._v("禁用")]),t("Button",{attrs:{disabled:e.selectDisabled},on:{click:function(t){return e.handleDelete({type:"multiple"})}}},[e._v("删除")])],1),t("div",{staticClass:"footer-page"},[t("kdx-page-component",{ref:"page",attrs:{total:e.total},on:{"on-change":e.handlePageChange}})],1)],1)};t.render=a;var n=[];t.staticRenderFns=n},d0b6:function(e,t,a){"use strict";a("401d")},d472:function(e,t,a){"use strict";var n=a("3995");a.o(n,"render")&&a.d(t,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]}))},d7e8:function(e,t,a){"use strict";a.r(t);var n=a("1b08"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a}}]);