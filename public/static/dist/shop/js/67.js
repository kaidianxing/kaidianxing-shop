(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[67],{"0473":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"good-add-limit"},[t("Form",{ref:"form",attrs:{model:e.$store.state.goodAddEdit.model,rules:e.rules,"label-width":120}},[t("div",{staticClass:"box"},[t("kdx-form-title",[e._v("商品浏览权限")]),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"会员等级：",prop:"browse_level_perm"}},[t("RadioGroup",{model:{value:e.model_browse_level_perm,callback:function(t){e.model_browse_level_perm=t},expression:"model_browse_level_perm"}},[t("Radio",{attrs:{label:"0"}},[e._v("不限制会员等级")]),t("Radio",{attrs:{label:"1"}},[e._v("指定会员等级可见")])],1),t("kdx-hint-alert",{directives:[{name:"show",rawName:"v-show",value:"1"===e.model_browse_level_perm,expression:"model_browse_level_perm === '1'"}],staticClass:"alert"},[e._v(" 添加后，只有添加后的会员等级内的会员才可浏览该商品 ")]),"1"===e.model_browse_level_perm?t("div",{staticClass:"nest-box"},[t("FormItem",{attrs:{prop:"browse_level_perm_ids"}},[t("Button",{staticClass:"add-label ivu-normal brand",on:{click:function(t){return e.addLevel("browse")}}},[e._v("+添加")]),e.limitLabel.browse_level&&e.limitLabel.browse_level.length>0?t("div",{staticClass:"label-list"},e._l(e.limitLabel.browse_level,(function(l,a){return t("kdx-tag-label",{key:a,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"info",border:"",closable:!0},on:{"on-close":function(t){return e.closeLevel("browse",a)}}},[e._v(" "+e._s(l.level_name)+" ")])})),1):e._e()],1)],1):e._e()],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"会员标签组：",prop:"browse_tag_perm"}},[t("RadioGroup",{model:{value:e.model_browse_tag_perm,callback:function(t){e.model_browse_tag_perm=t},expression:"model_browse_tag_perm"}},[t("Radio",{attrs:{label:"0"}},[e._v("不限制标签组")]),t("Radio",{attrs:{label:"1"}},[e._v("指定标签组可见")])],1),t("kdx-hint-alert",{directives:[{name:"show",rawName:"v-show",value:"1"===e.model_browse_tag_perm,expression:"model_browse_tag_perm === '1'"}],staticClass:"alert",attrs:{"show-icon":""}},[e._v(" 添加后，只有添加后的会员标签组内的会员才可浏览该商品 ")]),"1"===e.model_browse_tag_perm?t("div",{staticClass:"nest-box"},[t("FormItem",{attrs:{prop:"browse_tag_perm_ids"}},[t("Button",{staticClass:"add-label ivu-normal brand",on:{click:function(t){return e.addLabel("browse")}}},[e._v("+添加")]),e.limitLabel.browse_label&&e.limitLabel.browse_label.length>0?t("div",{staticClass:"label-list"},e._l(e.limitLabel.browse_label,(function(l,a){return t("kdx-tag-label",{key:a,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"warning",border:"",closable:!0},on:{"on-close":function(t){return e.closeLabel("browse",a)}}},[e._v(" "+e._s(l.group_name)+" ")])})),1):e._e()],1)],1):e._e()],1)],1),t("div",{staticClass:"box"},[t("kdx-form-title",[e._v(" 商品购买权限 ")]),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"会员等级：",prop:"buy_level_perm"}},[t("RadioGroup",{model:{value:e.model_buy_level_perm,callback:function(t){e.model_buy_level_perm=t},expression:"model_buy_level_perm"}},[t("Radio",{attrs:{label:"0"}},[e._v("不限制会员等级")]),t("Radio",{attrs:{label:"1"}},[e._v("指定会员等级可购买")])],1),t("kdx-hint-alert",{directives:[{name:"show",rawName:"v-show",value:"1"===e.model_buy_level_perm,expression:"model_buy_level_perm === '1'"}],staticClass:"alert",attrs:{"show-icon":""}},[e._v(" 添加后，只有添加后的会员等级内的会员才可购买该商品 ")]),"1"===e.model_buy_level_perm?t("div",{staticClass:"nest-box"},[t("FormItem",{attrs:{prop:"buy_level_perm_ids"}},[t("Button",{staticClass:"add-label ivu-normal brand",on:{click:function(t){return e.addLevel("buy")}}},[e._v("+添加")]),e.limitLabel.buy_level&&e.limitLabel.buy_level.length>0?t("div",{staticClass:"label-list"},e._l(e.limitLabel.buy_level,(function(l,a){return t("kdx-tag-label",{key:a,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"info",border:"",closable:!0},on:{"on-close":function(t){return e.closeLevel("buy",a)}}},[e._v(" "+e._s(l.level_name)+" ")])})),1):e._e()],1)],1):e._e()],1),t("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"会员标签组：",prop:"buy_tag_perm"}},[t("RadioGroup",{model:{value:e.model_buy_tag_perm,callback:function(t){e.model_buy_tag_perm=t},expression:"model_buy_tag_perm"}},[t("Radio",{attrs:{label:"0"}},[e._v("不限制标签组")]),t("Radio",{attrs:{label:"1"}},[e._v("指定标签组可购买")])],1),t("kdx-hint-alert",{directives:[{name:"show",rawName:"v-show",value:"1"===e.model_buy_tag_perm,expression:"model_buy_tag_perm === '1'"}],staticClass:"alert",attrs:{"show-icon":""}},[e._v(" 添加后，只有添加后的会员标签组内的会员才可购买该商品 ")]),"1"===e.model_buy_tag_perm?t("div",{staticClass:"nest-box"},[t("FormItem",{attrs:{prop:"buy_tag_perm_ids"}},[t("Button",{staticClass:"add-label ivu-normal brand",on:{click:function(t){return e.addLabel("buy")}}},[e._v("+添加")]),e.limitLabel.buy_label&&e.limitLabel.buy_label.length>0?t("div",{staticClass:"label-list"},e._l(e.limitLabel.buy_label,(function(l,a){return t("kdx-tag-label",{key:a,staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"warning",border:"",closable:!0},on:{"on-close":function(t){return e.closeLabel("buy",a)}}},[e._v(" "+e._s(l.group_name)+" ")])})),1):e._e()],1)],1):e._e()],1)],1)]),t("label-selector",{ref:"label_modal",attrs:{"current-list":e.label.list},on:{"on-change":e.changeLabel}}),t("level-selector",{ref:"level_modal",attrs:{"current-list":e.level.list},on:{"on-change":e.changeLevel}})],1)};t.render=l;var a=[];t.staticRenderFns=a},"068b":function(e,t,l){"use strict";l("67c7")},"136b":function(e,t,l){"use strict";var a=l("0473");l.o(a,"render")&&l.d(t,"render",(function(){return a["render"]})),l.o(a,"staticRenderFns")&&l.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"1c3a":function(e,t,l){var a=l("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,l("e9c4"),l("d3b7"),l("159b"),l("a434");var s=a(l("b85c")),i=a(l("2909")),n={name:"labelSelector",props:{currentList:{type:Array,default:function(){return[]}}},data:function(){return{value:!1,selectRows:[],list:[],loading:!1}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.selectRows=(0,i.default)(this.currentList),this.getLabelData())},handleCancel:function(){this.setValue()},handleOk:function(){this.$emit("on-change",JSON.parse(JSON.stringify(this.selectRows))),this.setValue()},initDefaultChecked:function(){var e=this;this.selectRows.length>0&&this.list.forEach((function(t,l){var a,i=(0,s.default)(e.selectRows);try{for(i.s();!(a=i.n()).done;){var n=a.value;if(t.id===n.id){e.$set(e.list[l],"checked",!0);break}}}catch(r){i.e(r)}finally{i.f()}}))},setLabelChecked:function(e,t){var l=this;if(this.$set(this.list[e],"checked",t),t)this.selectRows.push(this.list[e]);else{var a=-1;this.selectRows.forEach((function(t,s){t.id===l.list[e].id&&(a=s)})),this.selectRows.splice(a,1)}},getLabelData:function(){var e=this;this.loading=!0,this.$api.memberApi.getGroupList({is_all:1}).then((function(t){e.loading=!1,0===t.error&&(e.list=t.list||[],e.initDefaultChecked())}))}}};t.default=n},"1e22":function(e,t,l){"use strict";l.r(t);var a=l("1c3a"),s=l.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){l.d(t,e,(function(){return a[e]}))}(i);t["default"]=s.a},"1ea7":function(e,t,l){"use strict";var a=l("bbff");l.o(a,"render")&&l.d(t,"render",(function(){return a["render"]})),l.o(a,"staticRenderFns")&&l.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"1ff9":function(e,t,l){"use strict";l.r(t);var a=l("96f6"),s=l.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){l.d(t,e,(function(){return a[e]}))}(i);t["default"]=s.a},"2a3d":function(e,t,l){},"389d":function(e,t,l){"use strict";l.r(t);var a=l("b20d"),s=l.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){l.d(t,e,(function(){return a[e]}))}(i);t["default"]=s.a},"67c7":function(e,t,l){},"82d4":function(e,t,l){},"83b0":function(e,t,l){"use strict";l.r(t);var a=l("1ea7"),s=l("389d");for(var i in s)["default"].indexOf(i)<0&&function(e){l.d(t,e,(function(){return s[e]}))}(i);l("068b");var n=l("2877"),r=Object(n["a"])(s["default"],a["render"],a["staticRenderFns"],!1,null,"d1a95214",null);t["default"]=r.exports},"8a81":function(e,t,l){"use strict";var a=l("cecb");l.o(a,"render")&&l.d(t,"render",(function(){return a["render"]})),l.o(a,"staticRenderFns")&&l.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]}))},"96f6":function(e,t,l){var a=l("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,l("d81d"),l("a434"),l("d3b7");var s=a(l("5530")),i=a(l("c35a")),n=a(l("83b0")),r=l("8812"),o=l("2f62"),c={name:"index",components:{LabelSelector:i.default,LevelSelector:n.default},computed:(0,s.default)((0,s.default)({},(0,r.modelMap)()),(0,o.mapState)("goodAddEdit",{limitLabel:function(e){return e.limitLabel}})),data:function(){return{type:"",label:{list:[],type:""},level:{list:[],type:""},rules:{browse_level_perm_ids:[{required:!0,type:"array",message:"商品浏览权限会员等级标签必选"}],browse_tag_perm_ids:[{required:!0,type:"array",message:"商品浏览权限会员标签组必填"}],buy_level_perm_ids:[{required:!0,type:"array",message:"商品购买权限会员等级标签必填"}],buy_tag_perm_ids:[{required:!0,type:"array",message:"商品购买权限会员标签组必填"}],"ext_field.single_max_buy":[{required:!0,message:"单次最多购买必填"}],"ext_field.single_min_buy":[{required:!0,message:"单次最少购买必填"}],"ext_field.max_buy":[{required:!0,message:"总共可购买必填"}]}}},methods:{addLevel:function(e){var t=this;this.level.type=e,"browse"===e?this.level.list=this.limitLabel.browse_level:"buy"===e&&(this.level.list=this.limitLabel.buy_level),this.$nextTick((function(){t.$refs["level_modal"].setValue()}))},addLabel:function(e){var t=this;this.label.type=e,"browse"===e?this.label.list=this.limitLabel.browse_label:"buy"===e&&(this.label.list=this.limitLabel.buy_label),this.$nextTick((function(){t.$refs["label_modal"].setValue()}))},changeLabel:function(e){var t=e.map((function(e){return e.id}));"browse"===this.label.type?(this.limitLabel.browse_label=e,this.model_browse_tag_perm_ids=t):"buy"===this.label.type&&(this.limitLabel.buy_label=e,this.model_buy_tag_perm_ids=t)},changeLevel:function(e){var t=e.map((function(e){return e.id}));"browse"===this.level.type?(this.limitLabel.browse_level=e,this.model_browse_level_perm_ids=t):"buy"===this.level.type&&(this.limitLabel.buy_level=e,this.model_buy_level_perm_ids=t)},closeLevel:function(e,t){var l=this;this.$Modal.confirm({title:"提示",content:"是否删除该会员等级",onOk:function(){"browse"===e?(l.limitLabel.browse_level.splice(t,1),l.model_browse_level_perm_ids.splice(t,1)):"buy"===e&&(l.limitLabel.buy_level.splice(t,1),l.model_buy_level_perm_ids.splice(t,1))},onCancel:function(){}})},closeLabel:function(e,t){var l=this;this.$Modal.confirm({title:"提示",content:"是否删除该会员标签组",onOk:function(){"browse"===e?(l.limitLabel.browse_label.splice(t,1),l.model_browse_tag_perm_ids.splice(t,1)):"buy"===e&&(l.limitLabel.buy_label.splice(t,1),l.model_buy_tag_perm_ids.splice(t,1))},onCancel:function(){}})},validate:function(){var e=this;return new Promise((function(t){e.$refs["form"].validate((function(e){t(e)}))}))}}};t.default=c},"9b6f":function(e,t,l){"use strict";l.r(t);var a=l("136b"),s=l("1ff9");for(var i in s)["default"].indexOf(i)<0&&function(e){l.d(t,e,(function(){return s[e]}))}(i);l("e4bc");var n=l("2877"),r=Object(n["a"])(s["default"],a["render"],a["staticRenderFns"],!1,null,"018d4df4",null);t["default"]=r.exports},b20d:function(e,t,l){var a=l("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,l("e9c4"),l("d3b7"),l("159b"),l("a434");var s=a(l("b85c")),i=a(l("2909")),n={name:"levelSelector",props:{currentList:{type:Array,default:function(){return[]}}},data:function(){return{value:!1,selectRows:[],list:[],loading:!1}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.selectRows=(0,i.default)(this.currentList)||[],this.getLabelData())},handleCancel:function(){this.setValue()},handleOk:function(){this.$emit("on-change",JSON.parse(JSON.stringify(this.selectRows))),this.setValue()},initDefaultChecked:function(){var e=this;this.currentList.length>0&&this.list.forEach((function(t,l){var a,i=(0,s.default)(e.selectRows);try{for(i.s();!(a=i.n()).done;){var n=a.value;if(t.id===n.id){e.$set(e.list[l],"checked",!0);break}}}catch(r){i.e(r)}finally{i.f()}}))},setLabelChecked:function(e,t){var l=this;if(this.$set(this.list[e],"checked",t),t)this.selectRows.push(this.list[e]);else{var a=-1;this.selectRows.forEach((function(t,s){t.id===l.list[e].id&&(a=s)})),this.selectRows.splice(a,1)}},getLabelData:function(){var e=this;this.loading=!0,this.$api.memberApi.getLevelList({is_all:1}).then((function(t){e.loading=!1,0===t.error&&(e.list=t.list||[],e.initDefaultChecked())}))}}};t.default=n},b595:function(e,t,l){"use strict";l("82d4")},bbff:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var l=function(){var e=this,t=e._self._c;return t("kdx-modal-frame",{attrs:{title:"会员等级标签",loading:e.loading,"class-name":"shop-label-modal"},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("div",{staticClass:"shop-label"},[t("div",{staticClass:"custom"},[e.list.length>0?t("div",{staticClass:"recommend"},[t("div",{staticClass:"label-content"},e._l(e.list,(function(l,a){return t("div",{key:a,staticClass:"shop-label-item",class:{checked:l.checked},on:{click:function(t){return e.setLabelChecked(a,!l.checked)}}},[t("span",[e._v(" "+e._s(l.level_name))]),t("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin"}})],1)})),0)]):t("div",{staticStyle:{"text-align":"center"}},[e._v(" 暂无数据 ")])])])])};t.render=l;var a=[];t.staticRenderFns=a},c35a:function(e,t,l){"use strict";l.r(t);var a=l("8a81"),s=l("1e22");for(var i in s)["default"].indexOf(i)<0&&function(e){l.d(t,e,(function(){return s[e]}))}(i);l("b595");var n=l("2877"),r=Object(n["a"])(s["default"],a["render"],a["staticRenderFns"],!1,null,"0360cf99",null);t["default"]=r.exports},cecb:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var l=function(){var e=this,t=e._self._c;return t("kdx-modal-frame",{attrs:{title:"会员标签组",loading:e.loading,"class-name":"shop-label-modal"},on:{"on-cancel":e.handleCancel,"on-ok":e.handleOk},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("div",{staticClass:"shop-label"},[t("div",{staticClass:"custom"},[e.list.length>0?t("div",{staticClass:"recommend"},[t("div",{staticClass:"label-content"},e._l(e.list,(function(l,a){return t("div",{key:a,staticClass:"shop-label-item",class:{checked:l.checked},on:{click:function(t){return e.setLabelChecked(a,!l.checked)}}},[t("span",[e._v(" "+e._s(l.group_name))]),t("kdx-svg-icon",{staticClass:"icon",attrs:{type:"icon-chenggong-shixin-y"}})],1)})),0)]):t("div",{staticStyle:{"text-align":"center"}},[e._v(" 暂无数据 ")])])])])};t.render=l;var a=[];t.staticRenderFns=a},e4bc:function(e,t,l){"use strict";l("2a3d")}}]);