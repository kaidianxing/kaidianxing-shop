(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{"0185":function(t,e,a){"use strict";a.r(e);var i=a("0a09"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},"052c":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(a("2909"));a("d3b7"),a("159b"),a("b0c0"),a("99af");var n={name:"list",components:{},props:{},data:function(){var t=this;this.$createElement;return{total:0,list:[],searchData:{keywords:"",scene:"all"},sceneList:[],page:{pageSize:10,pageNumber:1},columns:[{title:"任务名称",key:"task_name"},{title:"打印机",key:"printer_id",render:function(t,e){var a=[];return e.row.printer_id&&e.row.printer_id.forEach((function(i,s){a.push(t("div",{class:"label"},[t("span",[i.name]),t("span",{class:"line"},[s==e.row.printer_id.length-1?"":"|"])]))})),t("div",{class:"signature flex"},[a.length>0?a:"-"])}},{title:"打印模板",key:"template_name"},{title:"打印场景",key:"scene",render:function(t,e){var a=[];return e.row.scene&&e.row.scene.forEach((function(i,s){a.push(t("div",{class:"label"},[t("span",[i]),t("span",{class:"line"},[s==e.row.scene.length-1?"":"|"])]))})),t("div",{class:"signature flex"},[a.length>0?a:"-"])}},{title:"添加时间",key:"created_at"},{title:"操作",key:"action",render:function(e,a){return e("div",[e("Button",{attrs:{type:"text"},on:{click:function(){t.handleEdit(a.row.id)}}},["编辑"]),e("Button",{class:"marginL-10",attrs:{type:"text"},on:{click:function(){t.handleDelete(a.row.id)}}},["删除"])])}}]}},computed:{},created:function(){},mounted:function(){this.getPrinterScene(),this.getList()},methods:{getPrinterScene:function(){var t=this;this.$api.printerApi.getPrinterScene().then((function(e){0==e.error&&(t.sceneList=[{name:"全部",value:"all"}].concat((0,s.default)(e.data)))}))},getList:function(){var t=this;this.loading=!0;var e={keyword:this.searchData.keywords,scene:"all"===this.searchData.scene?"":this.searchData.scene,pagesize:this.page.pageSize,page:this.page.pageNumber};this.$api.printerApi.getPrinterTaskList(e).then((function(e){t.loading=!1,0==e.error&&(t.list=e.data.list,t.total=e.data.total)}))},handleAdd:function(){this.$router.push({path:"/printer/task/add"})},handleSearch:function(){this.list=[],this.page=1,this.getList()},handleReset:function(){this.page={pageSize:10,pageNumber:1},this.searchData={keywords:"",scene:"all"},this.$refs["page"].reset(),this.getList()},changePage:function(t){this.page=t,this.getList()},handleEdit:function(t){this.$router.push({path:"/printer/task/edit",query:{id:t}})},handleDelete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除该任务吗",onOk:function(){e.$api.printerApi.deletePrinterTaskList({id:t}).then((function(t){0==t.error&&(e.$Message.success("删除成功"),e.getList())}))},onCancel:function(){}})}}};e.default=n},"0a09":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b"),a("b0c0");var s=i(a("31dd")),n={name:"list",components:{printerPreview:s.default},props:{},data:function(){var t=this;this.$createElement;return{preview:!1,total:0,list:[],searchData:{keywords:""},page:{pageSize:10,pageNumber:1},footer:"",templateList:[],columns:[{title:"模板名称",key:"name"},{title:"模板类型",key:"type_text"},{title:"状态",key:"status",render:function(t,e){return t("div",[1==e.row.status?t("span",{class:"success-color"},["已使用"]):t("span",{class:"danger-color"},["未使用"])])}},{title:"应用的打印机",key:"printer_id",render:function(t,e){var a=[];return e.row.printer_id&&e.row.printer_id.forEach((function(i,s){a.push(t("div",{class:"label"},[t("span",[i.name]),t("span",{class:"line"},[s==e.row.printer_id.length-1?"":"|"])]))})),t("div",{class:"signature flex"},[a.length>0?a:"-"])}},{title:"添加时间",key:"created_at"},{title:"操作",key:"action",render:function(e,a){return e("div",[e("Button",{attrs:{type:"text"},on:{click:function(){t.handlePreview(a.row.content,a.row.footer)}}},["预览"]),e("Button",{class:"marginL-10 marginR-10",attrs:{type:"text"},on:{click:function(){t.handleEdit(a.row.id)}}},["编辑"]),e("Button",{attrs:{type:"text"},on:{click:function(){t.handleDelete(a.row.id,a.row.status)}}},["删除"])])}}]}},computed:{},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0;var e={keyword:this.searchData.keywords,pagesize:this.page.pageSize,page:this.page.pageNumber};this.$api.printerApi.getPrinterTemList(e).then((function(e){t.loading=!1,0==e.error&&(t.list=e.data.list,t.total=e.data.total)}))},handleAdd:function(){this.$router.push({path:"/printer/template/add"})},handleSearch:function(){this.list=[],this.page=1,this.getList()},handleReset:function(){this.page={pageSize:10,pageNumber:1},this.searchData={keywords:""},this.$refs["page"].reset(),this.getList()},changePage:function(t){this.page=t,this.getList()},handlePreview:function(t,e){this.preview=!0,this.templateList=JSON.parse(t),this.footer=e},handleEdit:function(t){this.$router.push({path:"/printer/template/edit",query:{id:t}})},handleDelete:function(t){var e=this;this.$api.printerApi.deletePrinterTem({id:t,is_check:1}).then((function(a){0==a.error&&e.$Modal.confirm({title:"提示",content:(null===a||void 0===a?void 0:a.message)||"确认删除该模板吗",onOk:function(){e.$api.printerApi.deletePrinterTem({id:t,is_check:0}).then((function(t){0==t.error&&(e.$Message.success("删除成功"),e.getList())}))},onCancel:function(){}})}))}}};e.default=n},1511:function(t,e,a){"use strict";a("6ef1")},"17f5":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"printer-template-list"},[a("kdx-header-bar",{attrs:{type:"little"},scopedSlots:t._u([{key:"header",fn:function(){return[a("Button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("+添加模板")])]},proxy:!0}])},[a("Form",{ref:"form",attrs:{model:t.searchData,"label-width":100,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"模板名称："}},[a("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"请输入"},on:{"on-enter":t.handleSearch},model:{value:t.searchData.keywords,callback:function(e){t.$set(t.searchData,"keywords",e)},expression:"searchData.keywords"}})],1),a("div",{staticClass:"ivu-form-item-btn"},[a("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),a("Button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),a("div",{staticClass:"table-list"},[a("Table",{ref:"table",attrs:{columns:t.columns,data:t.list}}),a("div",{staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1)],1),a("kdx-modal-frame",{attrs:{title:"小票预览",styles:{width:"700px"},"mask-closable":!1,footerHide:!0},model:{value:t.preview,callback:function(e){t.preview=e},expression:"preview"}},[a("div",{staticClass:"preview-printer-modal"},[a("printer-preview",{attrs:{type:"preview",templateList:t.templateList,footer:t.footer}})],1)])],1)},s=[]},"23fc":function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d81d");var i={name:"PrinterPreview",components:{},props:{templateList:{type:Array,default:function(){return[]}},footer:{type:String,default:"谢谢惠顾，欢迎下次光临"},type:{type:String,default:""}},data:function(){return{templateDefault:{header_info:{shop_name:1},goods_info:{goods_name:1,goods_num:1,goods_price:1,goods_sku:0,goods_option:0},calculate_info:{order_original_price:1,dispatch_price:0,order_discounts_price:1,order_pay_price:1},order_info:{order_no:1,pay_type:0,pay_channel:0,created_at:1,pay_time:0,finish_time:0,dispatch_type:0,order_form:0},member_info:{nickname:1,mobile:0,level:1,commission_level:0},mark_info:{customer_mark:0},customer_info:{name:1,mobile:1,address:0},shop_info:{qrcode:0,mobile:1,address:1}}}},watch:{},computed:{templateData:function(){var t=this.templateDefault;return this.templateList.map((function(e){e.children.map((function(a){t[e.type][a.type]=a.status}))})),t}},created:function(){},mounted:function(){},methods:{}};e.default=i},"24fc":function(t,e,a){"use strict";a.r(e);var i=a("fee5"),s=a("7c6e");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("5c7b");var r=a("2877"),o=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"7d860358",null);e["default"]=o.exports},"31dd":function(t,e,a){"use strict";a.r(e);var i=a("4acb"),s=a("a22f");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("5f13");var r=a("2877"),o=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"3946ad5a",null);e["default"]=o.exports},3636:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("b0c0"),a("25f0"),a("d81d"),a("a434"),a("a15b"),a("ac1f"),a("5319");var s=i(a("c7eb")),n=i(a("1da1")),r=i(a("5530")),o=i(a("f1d7")),l=a("2f62"),d=a("8812"),c={name:"index",components:{PrinterSelector:o.default},props:{},data:function(){var t=this;this.$createElement;return{id:"",loading:!1,taskData:{name:"",scene:[1],template_id:"",times:1,printer_id:[],delivery:[]},dispatchEnable:{},templateList:[],selector:{value:!1,list:[]},sceneList:[],columns:[{title:"打印机名称",key:"name"},{title:"打印机品牌",key:"brand"},{title:"打印机位置",key:"location",render:function(t,e){return t("div",[e.row.location||"-"])}},{title:"操作",key:"action",render:function(e,a){return 0==a.row.status?e("div",[e("Button",{class:"marginR-10",attrs:{type:"text",disabled:!0}},["已禁用"]),e("Button",{class:"marginR-10",attrs:{type:"text"},on:{click:function(){t.handleEditPrinter(a.row.id)}}},["编辑"]),e("Button",{attrs:{type:"text"},on:{click:function(){t.handleDeletePrinter(a.index)}}},["删除"])]):e("div",[e("Button",{class:"marginR-10",attrs:{type:"text"},on:{click:function(){t.handleEditPrinter(a.row.id)}}},["编辑"]),e("Button",{attrs:{type:"text"},on:{click:function(){t.handleDeletePrinter(a.index)}}},["删除"])])}}],rules:{name:[{required:!0,message:"请输入打印机名称"}],template_id:[{required:!0,message:"请选择小票模板"}],scene:[{required:!0,type:"array",min:1,message:"请选择打印场景"}],times:[{required:!0,message:"请选择打印联数"}],delivery:[{required:!0,message:"物流方式必选",min:1,type:"array"}]}}},computed:(0,r.default)((0,r.default)({},(0,d.modelMap)()),(0,d.stateMap)(["dispatchList"])),created:function(){this.getInfo()},mounted:function(){var t,e;(this.getPrinterScene(),this.getPrinterTemList(),null!==(t=this.$route)&&void 0!==t&&t.query.id)&&(this.id=(null===(e=this.$route)||void 0===e?void 0:e.query.id)||"",this.getData())},methods:(0,r.default)((0,r.default)({},(0,l.mapActions)("goodAddEdit",["getDispatchEnable"])),{},{getInfo:function(){var t=this;return(0,n.default)((0,s.default)().mark((function e(){var a;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getDispatchEnable();case 2:t.dispatchEnable=e.sent,a=t.dispatchEnable.express,a&&t.taskData.delivery.push("10");case 5:case"end":return e.stop()}}),e)})))()},expressSelected:function(t){return new Set(this.$store.state.goodAddEdit.model.logistics_support).has(t)},getPrinterScene:function(){var t=this;this.loading=!0,this.$api.printerApi.getPrinterScene().then((function(e){0==e.error&&(t.loading=!1,t.sceneList=e.data)}))},getPrinterTemList:function(){var t=this;this.$api.printerApi.getPrinterTemList({only_list:1}).then((function(e){0==e.error&&(t.templateList=e.data)}))},getData:function(){var t=this;this.$api.printerApi.editPrinterTaskList({id:this.id}).then((function(e){0==e.error&&(console.log(e),t.taskData={name:e.data.name,scene:e.data.scene,template_id:e.data.template_id.toString(),times:e.data.times,delivery:e.data.delivery,printer_id:e.data.printer_id.map((function(t){return t.id}))},t.selector.list=e.data.printer_id)}))},handlerRefresh:function(){this.getPrinterTemList()},handlerAdd:function(){this.$router.push({path:"/printer/template/add"})},addPrinter:function(){this.selector.value=!0},changePrinterList:function(t){this.selector.list=t,this.cancelSelector()},cancelSelector:function(){this.selector.value=!1},handleEditPrinter:function(t){var e="/printer/manage/edit",a={id:t};this.$utils.openNewWindowPage(e,a)},handleDeletePrinter:function(t){this.selector.list.splice(t,1)},handleSave:function(){var t=this;this.$refs["form"].validate((function(e){e&&t.submit()}))},submit:function(){var t=this;if(this.selector.list.length<=0)this.$Message.error("请选择打印机");else{var e=this.selector.list.map((function(t){return t.id})),a=(0,r.default)((0,r.default)({},this.taskData),{},{printer_id:e.join(","),scene:this.taskData.scene.join(",")});this.id&&(a.id=this.id),this.$api.printerApi[this.id?"savePrinterTaskList":"addPrinterTaskList"](a).then((function(e){0==e.error&&(t.$Message.success("保存成功"),t.$router.replace({path:"/printer/task/list"}))}))}},fnJumpOrdinaryExpress:function(){this.$utils.openNewWindowPage("/order/ordinary-express")},choosePlace:function(){this.$refs.selector.setValue()}})};e.default=c},"3f2c":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(a("2909")),n=i(a("b85c"));a("a9e3"),a("4de4"),a("d3b7"),a("159b"),a("ac1f"),a("841c");var r={name:"PrinterSelector",props:{value:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},current:{type:[String,Object]},currentList:{type:Array},limit:{type:Number},pick_way:{type:[String,Number],default:""}},data:function(){var t=this;this.$createElement;return{search:{keyword:""},columns:[{title:"打印机名称",key:"name"},{title:"打印机品牌",key:"brand"},{title:"打印机位置",key:"location",render:function(t,e){return t("div",[e.row.location||"-"])}},{title:"操作",key:"action",width:100,render:function(e,a){return e("div",{class:"action"},[e("Button",{class:"default-primary",style:{display:a.row.checked?"none":"block"},on:{click:function(){t.setChecked(a.index,!0)}}},["选择"]),e("Button",{attrs:{type:"primary"},style:{display:a.row.checked?"block":"none"},on:{click:function(){t.setChecked(a.index,!1)}}},["已选"])])}}],data:[],total:0,page:{pageSize:10,pageNumber:1},loading:!1,selectRows:[],selectRow:{}}},methods:{handleSearch:function(){this.resetPage(),this.getList()},handlePageChange:function(t){this.page=t,this.getList();try{this.$refs.scrollBox.scrollTop=0}catch(e){console.log(e)}},resetPage:function(){var t;this.page={pageSize:10,pageNumber:1},null===(t=this.$refs["page"])||void 0===t||t.reset()},setChecked:function(t,e){var a=this;if(this.multiple){if(this.limit&&this.selectRows.length===this.limit&&e)return void this.$Message.error("已超出最大可选数量");this.$set(this.data[t],"checked",e),0===this.selectRows.length||e?this.selectRows.push(this.data[t]):this.selectRows=this.selectRows.filter((function(e){return e.id!==a.data[t].id}))}else e?(this.data.forEach((function(t,e){a.$set(a.data[e],"checked",!1)})),this.$set(this.data[t],"checked",!0),this.selectRow=this.data[t]):(this.$set(this.data[t],"checked",!1),this.selectRow={})},defaultChecked:function(){var t=this;this.multiple?this.data.forEach((function(e,a){var i,s=(0,n.default)(t.selectRows);try{for(s.s();!(i=s.n()).done;){var r=i.value;if(r.id===e.id){t.$set(t.data[a],"checked",!0);break}}}catch(o){s.e(o)}finally{s.f()}})):this.data.forEach((function(e,a){t.selectRow&&e.id===t.selectRow.id?t.$set(t.data[a],"checked",!0):t.$set(t.data[a],"checked",!1)}))},getList:function(){var t=this;this.loading=!0;var e=Object.assign({},this.search),a=Object.assign({pagesize:this.page.pageSize,page:this.page.pageNumber},e);console.log(a),this.$api.printerApi.printerList(a).then((function(e){t.loading=!1,0===e.error&&(t.data=e.data.list,t.total=e.data.total,t.defaultChecked())}))},handleSave:function(){this.multiple?this.$emit("on-change",this.selectRows):this.$emit("on-change",this.selectRow),this.handleCancel()},handleCancel:function(){this.$emit("on-cancel")},resetSearch:function(){this.search={keyword:""}}},watch:{value:{handler:function(t){t&&(this.multiple?this.selectRows=(0,s.default)(this.currentList)||[]:this.selectRow=this.current||{},this.resetSearch(),this.resetPage(),this.getList())},immediate:!0}},mounted:function(){this.resetSearch()}};e.default=r},"4acb":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"printer-preview"},["preview"!=t.type?a("div",{staticClass:"title"},[t._v("小票预览")]):t._e(),"preview"!=t.type?a("kdx-hint-alert",{attrs:{"show-icon":!1}},[t._v("提示：当前小票只适用 58mm规格。")]):t._e(),a("div",{staticClass:"printer-template-content"},[t.templateData.header_info.shop_name?a("div",{staticClass:"top"},[a("div",{staticClass:"shop-name"},[t._v("店铺名称")])]):t._e(),a("div",{staticClass:"goods-info"},[t.templateData.goods_info.goods_name||t.templateData.goods_info.goods_sku||t.templateData.goods_info.goods_num||t.templateData.goods_info.goods_price?a("div",{staticClass:"item flex border"},[t.templateData.goods_info.goods_name||t.templateData.goods_info.goods_sku?a("div",{staticClass:"item-title"},[t._v("商品名称")]):t._e(),t.templateData.goods_info.goods_num?a("div",{staticClass:"item-title"},[t._v("数量")]):t._e(),t.templateData.goods_info.goods_stock?a("div",{staticClass:"item-title"},[t._v("库存")]):t._e(),t.templateData.goods_info.goods_price?a("div",{staticClass:"item-title price"},[t._v("金额")]):t._e()]):t._e(),t.templateData.goods_info.goods_name||t.templateData.goods_info.goods_sku||t.templateData.goods_info.goods_num||t.templateData.goods_info.goods_price?a("div",{staticClass:"border goods-info-content"},[a("div",{staticClass:"item-info mt-12"},[t.templateData.goods_info.goods_name?a("div",{staticClass:"goods-title"},[t._v("塑料玩具储物箱儿童侧开衣物整理箱")]):t._e(),t.templateData.goods_info.goods_sku?a("div",[t._v("SC146546546545454")]):t._e(),t.templateData.goods_info.goods_option?a("div",[t._v("【中+白】")]):t._e()]),a("div",{staticClass:"item flex"},[a("div"),t.templateData.goods_info.goods_num?a("div",{staticClass:"item-info"},[t._v("x1")]):t._e(),t.templateData.goods_info.goods_stock?a("div",{staticClass:"item-info"},[t._v("99")]):t._e(),t.templateData.goods_info.goods_price?a("div",{staticClass:"item-info price"},[t._v("￥299.00")]):t._e()]),a("div",{staticClass:"item-info mt-12"},[t.templateData.goods_info.goods_name?a("div",{staticClass:"goods-title"},[t._v("塑料玩具储物箱儿童侧开衣物整理箱")]):t._e(),t.templateData.goods_info.goods_sku?a("div",[t._v("SC146546546545454")]):t._e(),t.templateData.goods_info.goods_option?a("div",[t._v("【中+白】")]):t._e()]),a("div",{staticClass:"item flex"},[a("div"),t.templateData.goods_info.goods_num?a("div",{staticClass:"item-info"},[t._v("x1")]):t._e(),t.templateData.goods_info.goods_stock?a("div",{staticClass:"item-info"},[t._v("99")]):t._e(),t.templateData.goods_info.goods_price?a("div",{staticClass:"item-info price"},[t._v("￥299.00")]):t._e()]),a("div",{staticClass:"item-info mt-12"},[t.templateData.goods_info.goods_name?a("div",{staticClass:"goods-title"},[t._v("塑料玩具储物箱儿童侧开衣物整理箱")]):t._e(),t.templateData.goods_info.goods_sku?a("div",[t._v("SC146546546545454")]):t._e(),t.templateData.goods_info.goods_option?a("div",[t._v("【中+白】")]):t._e()]),a("div",{staticClass:"item flex"},[a("div"),t.templateData.goods_info.goods_num?a("div",{staticClass:"item-info"},[t._v("x1")]):t._e(),t.templateData.goods_info.goods_stock?a("div",{staticClass:"item-info"},[t._v("99")]):t._e(),t.templateData.goods_info.goods_price?a("div",{staticClass:"item-info price"},[t._v("￥299.00")]):t._e()])]):t._e()]),a("div",{staticClass:"calculate-info border"},[t.templateData.calculate_info.order_original_price?a("div",{staticClass:"item flex"},[t.templateData.calculate_info.order_original_price?a("div",{staticClass:"item-info"},[t._v("合计")]):t._e(),t.templateData.goods_info.goods_num?a("div",{staticClass:"item-info"},[t._v("x3")]):t._e(),t.templateData.calculate_info.order_original_price?a("div",{staticClass:"item-info price"},[t._v("￥897.00")]):t._e()]):t._e(),t.templateData.calculate_info.dispatch_price?a("div",{staticClass:"item flex"},[a("div",{staticClass:"item-info"},[t._v("运费")]),a("div",{staticClass:"item-info price"},[t._v("￥10.00")])]):t._e(),t.templateData.calculate_info.order_discounts_price?a("div",{staticClass:"item flex"},[a("div",{staticClass:"item-info"},[t._v("优惠金额")]),a("div",{staticClass:"item-info price"},[t._v("-￥10.00")])]):t._e(),t.templateData.calculate_info.order_pay_price?a("div",{staticClass:"item flex"},[a("div",{staticClass:"item-info"},[t._v("实付金额")]),a("div",{staticClass:"item-info price"},[t._v("￥897.00")])]):t._e()]),a("div",{staticClass:"order-info border"},[t.templateData.order_info.order_no?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("订单编号：")]),a("div",[t._v("ME20185464567485465213")])]):t._e(),t.templateData.order_info.pay_type?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("支付方式：")]),a("div",[t._v("微信支付")])]):t._e(),t.templateData.order_info.pay_channel?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("支付渠道：")]),a("div",[t._v("微信小程序")])]):t._e(),t.templateData.order_info.created_at?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("下单时间：")]),a("div",[t._v("2020-07-07 18:21:10")])]):t._e(),t.templateData.order_info.order_form?a("div",{staticClass:"item"},[a("div",[t._v("单行文本标题比如使用人数：")]),a("div",[t._v("单行文本输入内容比如2人")])]):t._e(),t.templateData.order_info.pay_time?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("付款时间：")]),a("div",[t._v("2020-07-07 18:21:10")])]):t._e(),t.templateData.order_info.finish_time?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("收货时间：")]),a("div",[t._v("2020-07-07 18:21:10")])]):t._e()]),a("div",{staticClass:"order-info border"},[t.templateData.member_info.nickname?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("会员昵称：")]),a("div",[t._v("咔咔咔")])]):t._e(),t.templateData.member_info.mobile?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("联系方式：")]),a("div",[t._v("18566665555")])]):t._e(),t.templateData.member_info.level?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("会员等级：")]),a("div",[t._v("黄金会员")])]):t._e(),t.templateData.member_info.commission_level?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("分销商等级：")]),a("div",[t._v("二级分销商")])]):t._e()]),t.templateData.mark_info.customer_mark?a("div",{staticClass:"order-info border"},[t._m(0)]):t._e(),t.templateData.customer_info.name||t.templateData.customer_info.mobile||t.templateData.customer_info.address?a("div",{staticClass:"order-info border"},[t.templateData.customer_info.name?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("买家姓名：")]),a("div",[t._v("张三")])]):t._e(),t.templateData.customer_info.mobile?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("联系方式：")]),a("div",[t._v("18566665555")])]):t._e(),t.templateData.customer_info.address?a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("联系地址：")]),a("div",[t._v("XXX省 XXX市 XXX区 XXX街道")])]):t._e()]):t._e(),a("div",{staticClass:"qrcode-info order-info border"},[t.templateData.shop_info.qrcode?a("div",{staticClass:"item"},[a("i",{staticClass:"iconfont icon-haibao-erweimaneirong"})]):t._e(),t.templateData.shop_info.mobile?a("div",{staticClass:"item"},[t._v("0532-125445588")]):t._e(),t.templateData.shop_info.address?a("div",{staticClass:"item"},[t._v("XXX省 XXX市 XXX区 XXX街道")]):t._e()]),a("div",{staticClass:"qrcode-info order-info border"},[a("div",{staticClass:"item"},[t._v(t._s(t.footer||"谢谢惠顾，欢迎下次光临"))])])])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item flex"},[a("div",{staticClass:"label"},[t._v("买家留言：")]),a("div",{staticClass:"bold"},[t._v("请尽快发货！！！")])])}]},"4ebc":function(t,e,a){t.exports=a.p+"static/dist/shop/img/sn.png"},"54ed":function(t,e,a){"use strict";a.r(e);var i=a("694d"),s=a("f7ea");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("8bf4");var r=a("2877"),o=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"03ad20cc",null);e["default"]=o.exports},"5a06":function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("b0c0"),a("ac1f"),a("5319");var s=i(a("5530")),n={name:"index",components:{},props:{},data:function(){return{id:"",loading:!1,disabled:!1,data:{type:1,name:"",machine_code:"",msign:"",client_id:"",client_secret:"",sn:"",key:"",ukey:"",user:"",location:""},printerType:[],rules:{name:[{required:!0,message:"请输入打印机名称"}],machine_code:[{required:!0,message:"请输入终端号"}],msign:[{required:!0,message:"请输入打印机密钥"}],client_id:[{required:!0,message:"请输入应用ID"}],client_secret:[{required:!0,message:"请输入应用秘钥"}],sn:[{required:!0,message:"请输入打印机编号"}],key:[{required:!0,message:"请输入打印机密钥"}],user:[{required:!0,message:"请输入飞鹅云后台注册用户名"}],ukey:[{required:!0,message:"请输入飞鹅云后台登录生成的UKEY"}]}}},computed:{},created:function(){},mounted:function(){var t,e;(this.getPrinterType(),null!==(t=this.$route)&&void 0!==t&&t.query.id)&&(this.id=(null===(e=this.$route)||void 0===e?void 0:e.query.id)||"",this.disabled=!0,this.getData())},methods:{getPrinterType:function(){var t=this;this.loading=!0,this.$api.printerApi.getPrinterType().then((function(e){0==e.error&&(t.loading=!1,t.printerType=e.data)}))},getData:function(){var t=this;this.$api.printerApi.editPrinter({id:this.id}).then((function(e){0==e.error&&(t.data=(0,s.default)((0,s.default)({},e.data.config),{},{name:e.data.name,type:e.data.type,location:e.data.location}))}))},handleSave:function(t){var e=this;this.$refs["form"].validate((function(a){a&&e.handleParams(t)}))},handleParams:function(t){var e={};1==this.data.type?e={type:this.data.type,name:this.data.name,machine_code:this.data.machine_code,msign:this.data.msign,client_id:this.data.client_id,client_secret:this.data.client_secret,location:this.data.location}:2==this.data.type&&(e={type:this.data.type,name:this.data.name,sn:this.data.sn,key:this.data.key,ukey:this.data.ukey,user:this.data.user,location:this.data.location}),this.id&&"submit"==t&&(e.id=this.id),"test"===t?this.handleTest(e):this.submit(e)},handleTest:function(t){this.$api.printerApi.testPrinter(t).then((function(t){0==t.error&&console.log(t)}))},submit:function(t){var e=this;this.$api.printerApi[this.id?"savePrinter":"addPrinter"](t).then((function(t){0==t.error&&(e.$Message.success("保存成功"),e.$router.replace({path:"/printer/manage/list"}))}))}}};e.default=n},"5c09":function(t,e,a){"use strict";a("df3b7")},"5c7b":function(t,e,a){"use strict";a("900e")},"5eb2":function(t,e,a){},"5f13":function(t,e,a){"use strict";a("5eb2")},"60f5":function(t,e,a){"use strict";a("acc7")},"694d":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"printer-task-list"},[a("kdx-header-bar",{attrs:{type:"little"},scopedSlots:t._u([{key:"header",fn:function(){return[a("Button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("+添加打印任务")])]},proxy:!0}])},[a("Form",{ref:"form",attrs:{model:t.searchData,"label-width":100,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"关键词："}},[a("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"任务名称/打印模板"},on:{"on-enter":t.handleSearch},model:{value:t.searchData.keywords,callback:function(e){t.$set(t.searchData,"keywords",e)},expression:"searchData.keywords"}})],1),a("FormItem",{attrs:{label:"打印场景："}},[a("Select",{staticClass:"width-160",attrs:{placeholder:"请选择"},model:{value:t.searchData.scene,callback:function(e){t.$set(t.searchData,"scene",e)},expression:"searchData.scene"}},t._l(t.sceneList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])})),1)],1),a("div",{staticClass:"ivu-form-item-btn"},[a("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),a("Button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),a("div",{staticClass:"table-list"},[a("Table",{ref:"table",attrs:{columns:t.columns,data:t.list}}),a("div",{staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1)],1)],1)},s=[]},"6ef1":function(t,e,a){},"726c":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-modal-frame",{attrs:{value:t.value,title:"打印机选择器",width:"1000","ok-text":"保存"},on:{"on-ok":t.handleSave,"on-cancel":t.handleCancel}},[a("div",{staticClass:"selector-link-discount-coupon"},[a("div",{ref:"scrollBox",staticClass:"coupon-content"},[a("div",{staticClass:"search"},[a("Input",{staticClass:"width-250",attrs:{search:"","enter-button":"搜索",placeholder:"请输入"},on:{"on-search":t.getList,"on-enter":t.getList},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1),a("Table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",attrs:{columns:t.columns,data:t.data}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>10,expression:"total>10"}],staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.handlePageChange}})],1)])])},s=[]},"7c6e":function(t,e,a){"use strict";a.r(e);var i=a("b48c"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},"7fd0":function(t,e,a){"use strict";a.r(e);var i=a("c671"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},8812:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.stateMap=e.modelMap=void 0,a("ac1f"),a("5319"),a("d3b7"),a("159b");var s=i(a("ade3")),n=i(a("4360")),r=function(){var t={},e=n.default.state.goodAddEdit.model,a=function(e){t["model_".concat(e)]={get:function(){return n.default.state.goodAddEdit.model[e]},set:function(t){n.default.commit("goodAddEdit/setModelProps",(0,s.default)({},e,t))}}};for(var i in e)a(i);return t};e.modelMap=r;var o=function(t){var e={};return"string"===typeof t?e=(0,s.default)({},t,{get:function(){return n.default.state.goodAddEdit[t]},set:function(e){n.default.commit("goodAddEdit/set".concat(t.replace(/^./,(function(t){return t.toUpperCase()}))),e)}}):t instanceof Array&&t.forEach((function(t){e[t]={get:function(){return n.default.state.goodAddEdit[t]},set:function(e){n.default.commit("goodAddEdit/set".concat(t.replace(/^./,(function(t){return t.toUpperCase()}))),e)}}})),e};e.stateMap=o},"8bf4":function(t,e,a){"use strict";a("f3a4")},"900e":function(t,e,a){},"94eb":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.templateList=void 0;var a=[{value:"头部内容",type:"header_info",children:[{value:"商城名称",type:"shop_name",status:1}]},{value:"商品信息",type:"goods_info",children:[{value:"商品名称",type:"goods_name",status:1,disabled:!0},{value:"商品数量",type:"goods_num",status:1},{value:"商品金额",type:"goods_price",status:1},{value:"商品编码",type:"goods_sku",status:1,disabled:!1},{value:"商品规格",type:"goods_option",status:0,disabled:!0}]},{value:"结算信息",type:"calculate_info",children:[{value:"合计",type:"order_original_price",status:1},{value:"运费",type:"dispatch_price",status:0},{value:"优惠金额",type:"order_discounts_price",status:1},{value:"实付金额",type:"order_pay_price",status:1,disabled:!0}]},{value:"订单信息",type:"order_info",children:[{value:"订单编号",type:"order_no",status:1},{value:"支付方式",type:"pay_type",status:0},{value:"支付渠道",type:"pay_channel",status:0},{value:"下单时间",type:"created_at",status:1},{value:"付款时间",type:"pay_time",status:0},{value:"收货时间",type:"finish_time",status:0},{value:"物流方式",type:"dispatch_type",status:0},{value:"统一下单表单",type:"order_form",status:0}]},{value:"会员信息",type:"member_info",children:[{value:"会员昵称",type:"nickname",status:1},{value:"会员手机号",type:"mobile",status:0},{value:"会员等级",type:"level",status:1},{value:"分销商等级",type:"commission_level",status:0}]},{value:"备注信息",type:"mark_info",children:[{value:"买家留言",type:"customer_mark",status:0}]},{value:"买家信息",type:"customer_info",children:[{value:"买家姓名",type:"name",status:1},{value:"联系方式",type:"mobile",status:1},{value:"买家地址",type:"address",status:0}]},{value:"商城信息",type:"shop_info",children:[{value:"商城二维码",type:"qrcode",status:0},{value:"联系方式",type:"mobile",status:1},{value:"商城地址",type:"address",status:1}]}];e.templateList=a},"9ac2":function(t,e,a){"use strict";a.r(e);var i=a("e8ad"),s=a("be8a");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("5c09");var r=a("2877"),o=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"2acbec02",null);e["default"]=o.exports},a0fb:function(t,e,a){"use strict";a.r(e);var i=a("3f2c"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},a22f:function(t,e,a){"use strict";a.r(e);var i=a("23fc"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},a455:function(t,e,a){"use strict";a.r(e);var i=a("17f5"),s=a("0185");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("c089");var r=a("2877"),o=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"44ce85fa",null);e["default"]=o.exports},a82b:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("kdx-content-bar",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],scopedSlots:t._u([{key:"btn",fn:function(){return[i("Button",{staticClass:"default-primary",on:{click:function(e){return t.handleSave("test")}}},[t._v("测试打印")]),i("Button",{staticClass:"primary-long",on:{click:function(e){return t.handleSave("submit")}}},[t._v("保存")])]},proxy:!0}])},[i("div",{staticClass:"printer-manage-index"},[i("Form",{ref:"form",attrs:{model:t.data,rules:t.rules,"label-width":120}},[i("kdx-form-title",[t._v(t._s(t.id?"编辑打印机":"添加打印机"))]),i("FormItem",{attrs:{label:"打印机品牌："}},[i("Select",{staticClass:"width-340",attrs:{disabled:t.disabled,placeholder:"请选择打印机"},model:{value:t.data.type,callback:function(e){t.$set(t.data,"type",e)},expression:"data.type"}},t._l(t.printerType,(function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])})),1)],1),i("FormItem",{attrs:{label:"打印机名称：",prop:"name"}},[i("Input",{staticClass:"width-340",attrs:{type:"text",maxlength:"20","show-word-limit":"",placeholder:"请输入打印机名称"},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1),1==t.data.type?i("div",[i("FormItem",{attrs:{label:"终端号：",prop:"machine_code"}},[i("Input",{staticClass:"width-340",attrs:{type:"text",disabled:t.disabled,placeholder:"请输入打印机终端号"},model:{value:t.data.machine_code,callback:function(e){t.$set(t.data,"machine_code",e)},expression:"data.machine_code"}})],1),i("FormItem",{attrs:{label:"打印机密钥：",prop:"msign"}},[i("Input",{staticClass:"width-340",attrs:{type:"text",disabled:t.disabled,placeholder:"请输入打印机密钥"},model:{value:t.data.msign,callback:function(e){t.$set(t.data,"msign",e)},expression:"data.msign"}})],1),i("FormItem",{attrs:{label:"应用ID：",prop:"client_id"}},[i("Input",{staticClass:"width-340",attrs:{type:"text",disabled:t.disabled,placeholder:"请输入应用ID(管理中心系统集成里获取)"},model:{value:t.data.client_id,callback:function(e){t.$set(t.data,"client_id",e)},expression:"data.client_id"}})],1),i("FormItem",{attrs:{label:"应用秘钥：",prop:"client_secret"}},[i("Input",{staticClass:"width-340",attrs:{type:"text",disabled:t.disabled,placeholder:"请输入应用秘钥"},model:{value:t.data.client_secret,callback:function(e){t.$set(t.data,"client_secret",e)},expression:"data.client_secret"}})],1)],1):t._e(),2==t.data.type?i("div",[i("FormItem",{attrs:{label:"打印机编号：",prop:"sn"}},[i("Input",{staticClass:"width-340",attrs:{type:"text",disabled:t.disabled,placeholder:"请输入打印机编号"},model:{value:t.data.sn,callback:function(e){t.$set(t.data,"sn",e)},expression:"data.sn"}}),i("span",{staticClass:"mL-20"},[t._v("设备号")]),i("kdx-hint-tooltip",{attrs:{placement:"right","max-width":"395"}},[i("img",{attrs:{src:a("4ebc"),alt:""}})])],1),i("FormItem",{attrs:{label:"打印机密钥：",prop:"key"}},[i("Input",{staticClass:"width-340",attrs:{type:"text",disabled:t.disabled,placeholder:"请输入打印机密钥"},model:{value:t.data.key,callback:function(e){t.$set(t.data,"key",e)},expression:"data.key"}})],1),i("FormItem",{attrs:{label:"USER：",prop:"user"}},[i("Input",{staticClass:"width-340",attrs:{type:"text",disabled:t.disabled,placeholder:"请输入飞鹅云后台注册用户名"},model:{value:t.data.user,callback:function(e){t.$set(t.data,"user",e)},expression:"data.user"}})],1),i("FormItem",{attrs:{label:"UKEY：",prop:"ukey"}},[i("Input",{staticClass:"width-340",attrs:{type:"text",disabled:t.disabled,placeholder:"请输入飞鹅云后台登录生成的UKEY"},model:{value:t.data.ukey,callback:function(e){t.$set(t.data,"ukey",e)},expression:"data.ukey"}})],1)],1):t._e(),i("FormItem",{attrs:{label:"使用位置："}},[i("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"请输入使用位置"},model:{value:t.data.location,callback:function(e){t.$set(t.data,"location",e)},expression:"data.location"}})],1)],1)],1)])},s=[]},aace:function(t,e,a){"use strict";a.r(e);var i=a("f667"),s=a("7fd0");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("1511");var r=a("2877"),o=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"6c84e3c8",null);e["default"]=o.exports},acc7:function(t,e,a){},b025:function(t,e,a){"use strict";a.r(e);var i=a("a82b"),s=a("f8e6");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("d075");var r=a("2877"),o=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"179335c2",null);e["default"]=o.exports},b48c:function(t,e,a){var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(a("c7eb")),n=i(a("1da1")),r=i(a("5530"));a("e9c4"),a("d3b7"),a("ac1f"),a("5319"),a("4de4"),a("caad"),a("159b"),a("d81d");var o=i(a("31dd")),l=a("94eb"),d=a("2f62"),c={name:"index",components:{printerPreview:o.default},props:{},data:function(){return{disabled:!1,loading:!1,id:"",data:{type:1,width:1,name:"",footer:"谢谢惠顾，欢迎下次光临",qrcode:""},templateList:JSON.parse(JSON.stringify(l.templateList)),rules:{name:[{required:!0,message:"请输入打印机名称"}],footer:[{required:!0,message:"请输入底部信息"}]},tempMap:null,deliveryType:{}}},computed:{},created:function(){this.getTemplateMap()},mounted:function(){var t=this;this.getInfo().finally((function(){var e,a;null!==(e=t.$route)&&void 0!==e&&e.query.id&&(t.id=(null===(a=t.$route)||void 0===a?void 0:a.query.id)||"",t.getData())}))},methods:(0,r.default)((0,r.default)({},(0,d.mapActions)("goodAddEdit",["getDispatchEnable"])),{},{getInfo:function(){var t=this;return(0,n.default)((0,s.default)().mark((function e(){var a;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getDispatchEnable();case 2:a=e.sent,t.deliveryType=(0,r.default)({},a);case 4:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;this.loading=!0,this.$api.printerApi.editPrinterTem({id:this.id}).then((function(e){0==e.error&&(t.data=e.data,t.templateList=e.data.content,t.loading=!1)}))},handleCancel:function(){this.$router.replace({path:"/printer/template/list"})},handleSave:function(){var t=this;this.$refs["form"].validate((function(e){e&&t.submit()}))},submit:function(){var t=this,e=(0,r.default)((0,r.default)({},this.data),{},{content:JSON.stringify(this.templateList)});this.id&&(e.id=this.id),this.$api.printerApi[this.id?"savePrinterTem":"addPrinterTem"](e).then((function(e){0==e.error&&(t.$Message.success("保存成功"),t.$router.replace({path:"/printer/template/list"}))}))},handleChange:function(t,e){var a=this;"goods_sku"!=t.type&&"goods_option"!=t.type||this.$Modal.confirm({title:"提示",content:"商品编码和商品规格只能选择一个",onOk:function(){a.handleDisable(t,e)},onCancel:function(){a.handleStatus(t,e)}})},handleDisable:function(t,e){var a="goods_sku"==t.type?"goods_option":"goods_sku",i="1"==t.status;t.disabled=!1,e.filter((function(t){return t.type==a}))[0].disabled=i},handleStatus:function(t,e){var a=0==t.status?1:0;e.filter((function(e){return e.type==t.type}))[0].status=a},handleFormPerm:function(t){var e=this,a=["order_form"];if(this.tempMap.hasOwnProperty("order_info")){var i=this.templateList[this.tempMap.order_info.level1],s=i.children.some((function(t){return a.includes(t.type)}));s?i.children.forEach((function(e){"order_form"==e.type&&(e.disabled=t)})):a.forEach((function(a){var s=e.tempMap[a];i.children.push((0,r.default)((0,r.default)({},e.templateList[s.level1].children[s.level2]),{},{disabled:t}))}))}},removeForm:function(){var t=["order_form"];this.templateList=this.templateList.map((function(e){return"order_info"===e.type&&(e.children=e.children.filter((function(e){return!t.includes(e.type)}))),e}))},getTemplateMap:function(){var t=this;this.tempMap||(this.tempMap={},l.templateList.forEach((function(e,a){var i;t.tempMap[e.type]={level1:a},null!==(i=e.children)&&void 0!==i&&i.length&&e.children.forEach((function(e,i){t.tempMap[e.type]={level1:a,level2:i}}))})))}})};e.default=c},be8a:function(t,e,a){"use strict";a.r(e);var i=a("3636"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},c089:function(t,e,a){"use strict";a("cffe")},c14e:function(t,e,a){},c671:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"list",components:{},props:{},data:function(){var t=this;this.$createElement;return{total:0,list:[],searchData:{keywords:""},page:{pageSize:10,pageNumber:1},columns:[{title:"打印机名称",key:"name"},{title:"打印机品牌",key:"brand"},{title:"使用位置",key:"location",render:function(t,e){return t("div",[e.row.location||"-"])}},{title:"状态",key:"status",render:function(t,e){return t("div",[1==e.row.status?t("span",{class:"success-color"},["已启用"]):t("span",{class:"danger-color"},["未启用"])])}},{title:"操作",key:"action",render:function(e,a){return e("div",[e("Button",{attrs:{type:"text"},on:{click:function(){t.handleStatus(a.row)}}},[1==a.row.status?"禁用":"启用"]),e("Button",{class:"marginL-10 marginR-10",attrs:{type:"text"},on:{click:function(){t.handleEdit(a.row.id)}}},["编辑"]),e("Button",{attrs:{type:"text"},on:{click:function(){t.handleDelete(a.row.id)}}},["删除"]),e("Button",{class:"marginL-10",attrs:{type:"text"},on:{click:function(){t.handleCancelPrinter(a.row.id)}}},["取消任务"])])}}]}},computed:{},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0;var e={keyword:this.searchData.keywords,pagesize:this.page.pageSize,page:this.page.pageNumber};this.$api.printerApi.printerList(e).then((function(e){t.loading=!1,0==e.error&&(t.list=e.data.list,t.total=e.data.total)}))},handleAdd:function(){this.$router.push({path:"/printer/manage/add"})},handleSearch:function(){this.list=[],this.page=1,this.getList()},handleReset:function(){this.page={pageSize:10,pageNumber:1},this.searchData={keywords:""},this.$refs["page"].reset(),this.getList()},changePage:function(t){this.page=t,this.getList()},handleStatus:function(t){var e=this;1==t.status?this.$api.printerApi.printerForbidden({id:t.id,is_check:1}).then((function(a){0==a.error&&e.$Modal.confirm({title:"提示",content:(null===a||void 0===a?void 0:a.message)||"确认禁用该打印机",onOk:function(){e.$api.printerApi.printerForbidden({id:t.id,is_check:0}).then((function(t){0==t.error&&(e.$Message.success("修改成功"),e.getList())}))},onCancel:function(){}})})):this.$api.printerApi.printerActive({id:t.id}).then((function(t){0==t.error&&(e.$Message.success("修改成功"),e.getList())}))},handleEdit:function(t){this.$router.push({path:"/printer/manage/edit",query:{id:t}})},handleDelete:function(t){var e=this;this.$api.printerApi.deletePrinter({id:t,is_check:1}).then((function(a){0==a.error&&e.$Modal.confirm({title:"提示",content:(null===a||void 0===a?void 0:a.message)||"确认删除该打印机",onOk:function(){e.$api.printerApi.deletePrinter({id:t,is_check:0}).then((function(t){0==t.error&&(e.$Message.success("删除成功"),e.getList())}))},onCancel:function(){}})}))},handleCancelPrinter:function(t){var e=this;this.$api.printerApi.cancelPrinter({id:t}).then((function(t){0==t.error&&(e.$Message.success("取消成功"),e.getList())}))}}};e.default=a},cffe:function(t,e,a){},d075:function(t,e,a){"use strict";a("c14e")},df3b7:function(t,e,a){},e8ad:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("kdx-content-bar",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],scopedSlots:t._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"primary-long",on:{click:t.handleSave}},[t._v("保存")])]},proxy:!0}])},[a("div",{staticClass:"printer-task-index"},[a("Form",{ref:"form",attrs:{model:t.taskData,rules:t.rules,"label-width":120}},[a("kdx-form-title",[t._v(t._s(t.id?"编辑打印任务":"添加打印任务"))]),a("div",{staticClass:"level"},[a("FormItem",{attrs:{label:"打印任务：",prop:"name"}},[a("Input",{staticClass:"width-340",attrs:{type:"text",maxlength:"30","show-word-limit":"",placeholder:"请输入"},model:{value:t.taskData.name,callback:function(e){t.$set(t.taskData,"name",e)},expression:"taskData.name"}})],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"打印场景：",prop:"scene"}},[a("CheckboxGroup",{model:{value:t.taskData.scene,callback:function(e){t.$set(t.taskData,"scene",e)},expression:"taskData.scene"}},t._l(t.sceneList,(function(e,i){return a("Checkbox",{key:i,attrs:{label:e.value}},[t._v(t._s(e.name))])})),1)],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"物流方式：",prop:"delivery"}},[a("CheckboxGroup",{model:{value:t.taskData.delivery,callback:function(e){t.$set(t.taskData,"delivery",e)},expression:"taskData.delivery"}},[a("div",{staticClass:"logistics-box"},[a("Checkbox",{attrs:{label:"10",disabled:0===t.dispatchEnable.express}},[t._v(" 快递发货 "),0===t.dispatchEnable.express?a("span",[t._v(" (当前不可用，请到 "),a("span",{staticStyle:{color:"#2D8CF0",cursor:"pointer"},on:{click:t.fnJumpOrdinaryExpress}},[t._v(" 【配送方式】 ")]),t._v(" 管理中开启) ")]):t._e()])],1)])],1)],1),a("kdx-form-title",[t._v("打印模板设置")]),a("div",{staticClass:"level"},[a("FormItem",{attrs:{label:"选择小票模板：",prop:"template_id"}},[a("Select",{staticClass:"width-340",attrs:{placeholder:"请选择小票模板"},model:{value:t.taskData.template_id,callback:function(e){t.$set(t.taskData,"template_id",e)},expression:"taskData.template_id"}},t._l(t.templateList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1),a("Button",{staticClass:"mL-20",attrs:{type:"text"},on:{click:t.handlerRefresh}},[t._v("刷新")]),a("Button",{staticClass:"mL-20",attrs:{type:"text"},on:{click:t.handlerAdd}},[t._v("添加模板")])],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"打印联数：",prop:"ver"}},[a("RadioGroup",{model:{value:t.taskData.times,callback:function(e){t.$set(t.taskData,"times",e)},expression:"taskData.times"}},[a("Radio",{attrs:{label:1}},[t._v("1联")]),a("Radio",{attrs:{label:2}},[t._v("2联")]),a("Radio",{attrs:{label:3}},[t._v("3联")]),a("Radio",{attrs:{label:4}},[t._v("4联")])],1)],1)],1),a("kdx-form-title",[t._v("打印机设置")]),a("FormItem",{attrs:{label:"打印机：",required:""}},[a("div",{staticClass:"next-box"},[a("Button",{staticClass:"default-primary",on:{click:t.addPrinter}},[t._v("+添加打印机")]),a("div",{staticClass:"printer-box"},[t.selector.list.length>0?a("Table",{ref:"table",attrs:{columns:t.columns,data:t.selector.list}}):t._e()],1)],1)])],1)],1),a("printer-selector",{attrs:{multiple:!0,"current-list":t.selector.list},on:{"on-change":t.changePrinterList,"on-cancel":t.cancelSelector},model:{value:t.selector.value,callback:function(e){t.$set(t.selector,"value",e)},expression:"selector.value"}})],1)},s=[]},f1d7:function(t,e,a){"use strict";a.r(e);var i=a("726c"),s=a("a0fb");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("60f5");var r=a("2877"),o=Object(r["a"])(s["default"],i["a"],i["b"],!1,null,"280687b0",null);e["default"]=o.exports},f3a4:function(t,e,a){},f667:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"printer-manage-list"},[a("kdx-header-bar",{attrs:{type:"little"},scopedSlots:t._u([{key:"header",fn:function(){return[a("Button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("+添加打印机")])]},proxy:!0}])},[a("Form",{ref:"form",attrs:{model:t.searchData,"label-width":100,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("FormItem",{attrs:{label:"打印机名称："}},[a("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"请输入"},on:{"on-enter":t.handleSearch},model:{value:t.searchData.keywords,callback:function(e){t.$set(t.searchData,"keywords",e)},expression:"searchData.keywords"}})],1),a("div",{staticClass:"ivu-form-item-btn"},[a("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),a("Button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),a("div",{staticClass:"table-list"},[a("Table",{ref:"table",attrs:{columns:t.columns,data:t.list}}),a("div",{staticClass:"footer-page"},[a("kdx-page-component",{ref:"page",attrs:{total:t.total},on:{"on-change":t.changePage}})],1)],1)],1)},s=[]},f7ea:function(t,e,a){"use strict";a.r(e);var i=a("052c"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},f8e6:function(t,e,a){"use strict";a.r(e);var i=a("5a06"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},fee5:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"printer-template-index flex"},[a("printer-preview",{attrs:{templateList:t.templateList,footer:t.data.footer}}),a("div",{staticClass:"right"},[a("kdx-content-bar",{staticClass:"content-bar-template",scopedSlots:t._u([{key:"btn",fn:function(){return[a("Button",{staticClass:"default-long",on:{click:t.handleCancel}},[t._v("取消")]),a("Button",{staticClass:"primary-long",on:{click:t.handleSave}},[t._v("保存")])]},proxy:!0}])},[a("div",{staticClass:"content"},[a("Form",{ref:"form",attrs:{model:t.data,rules:t.rules,"label-width":120}},[a("kdx-form-title",[t._v("模板信息")]),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"模板类型："}},[a("RadioGroup",{model:{value:t.data.type,callback:function(e){t.$set(t.data,"type",e)},expression:"data.type"}},[a("Radio",{attrs:{label:1}},[t._v("商品订单")])],1)],1),a("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"打印纸宽："}},[a("RadioGroup",{model:{value:t.data.width,callback:function(e){t.$set(t.data,"width",e)},expression:"data.width"}},[a("Radio",{attrs:{label:1}},[t._v("58mm")])],1)],1),a("FormItem",{attrs:{label:"模板名称：",prop:"name"}},[a("Input",{staticClass:"width-340",attrs:{type:"text",maxlength:"20","show-word-limit":"",placeholder:"请输入模板名称"},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1),a("kdx-form-title",[t._v("展示内容")]),a("div",{staticClass:"form-list"},t._l(t.templateList,(function(e,i){return a("div",{key:i,staticClass:"table-content-item flex"},[a("div",{staticClass:"item-left"},[t._v(t._s(e.value))]),a("div",{staticClass:"flex item-right-box"},t._l(e.children,(function(i,s){return a("div",{key:s,staticClass:"item-right"},[a("Checkbox",{attrs:{"true-value":1,"false-value":0,disabled:i.disabled},on:{"on-change":function(a){return t.handleChange(i,e.children)}},model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"childrenItem.status"}},[t._v(" "+t._s(i.value)+" "),"dispatch_price"==i.type?a("kdx-hint-tooltip",{attrs:{type:"form","max-width":340}},[a("Form",[a("FormItem",{attrs:{label:""}},[t._v("虚拟商品、虚拟卡密商品无运费时，"),a("br"),t._v("打印小票时的运费不展示")])],1)],1):t._e()],1),"qrcode"==i.type&&1==i.status?a("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"请输入二维码内容"},model:{value:t.data.qrcode,callback:function(e){t.$set(t.data,"qrcode",e)},expression:"data.qrcode"}}):t._e()],1)})),0)])})),0),a("FormItem",{attrs:{label:"底部信息：",prop:"footer"}},[a("Input",{staticClass:"width-430",attrs:{type:"textarea",autosize:{minRows:3},placeholder:"请输入底部信息"},model:{value:t.data.footer,callback:function(e){t.$set(t.data,"footer",e)},expression:"data.footer"}})],1)],1)],1)])],1)],1)},s=[]}}]);