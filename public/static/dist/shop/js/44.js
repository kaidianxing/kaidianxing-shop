(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[44],{"04c7":function(t,e,a){"use strict";a.r(e);var n=a("8c2d"),i=a("d215");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("5a40");var s=a("2877"),o=Object(s["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"cbc8da0a",null);e["default"]=o.exports},"058a":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tabBar"},t._l(t.tabList,(function(a){return e("div",{key:a.id,staticClass:"tab",class:{active:t.tabCent.id==a.id},on:{click:function(e){return t.tabClick(a)}}},[t._v(t._s(a.tabTit))])})),0)};e.render=a;var n=[];e.staticRenderFns=n},"06a6":function(t,e,a){"use strict";a.r(e);var n=a("bd86"),i=a("5e8a");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("cf31");var s=a("2877"),o=Object(s["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"addc01d6",null);e["default"]=o.exports},"0968":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3"),a("caad");var i=n(a("d858")),r=n(a("06a6")),s={name:"GoodsTooltip",components:{QrCode:i.default,Tabbar:r.default},props:{content:{type:String},maxWidth:{type:Number,default:340},type:{type:String,default:"text",validator:function(t){return["text","form","image","qrCode"].includes(t)}},image:{type:String,default:a("5474")},delay:{type:Number,default:0},text:{type:String,default:"复制链接"},url:{type:String,default:"https://www.baidu.com/"},qrcode_url:{type:String,default:""},id:{type:String,default:""},placement:{type:String,default:"top"},width:String,trigger:{type:String,default:"hover"}},data:function(){return{imgUrl:"",tabContent:{id:"h5",tabTit:"H5",tabLink:"商品链接",isShow:!1},tabList:[{id:"h5",tabTit:"H5",tabLink:"商品链接",isShow:!1},{id:"wxapp",tabTit:"微信小程序",tabLink:"微信小程序商品路径",isShow:!0}],qrData:{},loading:!1}},mounted:function(){this.image&&-1==this.image.indexOf("static/dist/shop/")&&(this.imgUrl=this.$media(this.image))},watch:{"tabContent.id":{handler:function(t){var e=this;"wxapp"===t&&this.$api.goodsApi.getGoodQrcode({id:this.id}).then((function(t){0===t.error&&(e.qrData=t.data)}))}}},methods:{onPopperShow:function(){this.$emit("on-popper-show")},tabClick:function(t){this.tabContent=t},downCode:function(){if("wxapp"===this.tabContent.id){var t=new Image;return t.setAttribute("crossOrigin","anonymous"),t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var a=e.getContext("2d");a.drawImage(t,0,0,t.width,t.height);var n=e.toDataURL("image/png"),i=document.createElement("a"),r=new MouseEvent("click");i.download="小程序商品二维码",i.href=n,i.dispatchEvent(r)},void(t.src=this.qrData.qrcode)}}}};e.default=s},"09ba":function(t,e,a){"use strict";a.r(e);var n=a("944b"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"0c61":function(t,e,a){},"0c76":function(t,e,a){"use strict";a.r(e);var n=a("f7c7"),i=a("bca8");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("bf34");var s=a("2877"),o=Object(s["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"72a49dff",null);e["default"]=o.exports},"0da9":function(t,e,a){"use strict";a.r(e);var n=a("324b"),i=a("8ab6");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("8a9d");var s=a("2877"),o=Object(s["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"4385b6e8",null);e["default"]=o.exports},"0e63":function(t,e,a){"use strict";a.r(e);var n=a("335e"),i=a("faa4");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("1e26");var s=a("2877"),o=Object(s["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"29435bcf",null);e["default"]=o.exports},1159:function(t,e,a){"use strict";var n=a("b98a");a.o(n,"render")&&a.d(e,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]}))},1950:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("kdx-modal-frame",{attrs:{title:"修改商品信息",width:880},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOk},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[e("div",{staticClass:"multi-specification"},[e("div",{staticClass:"batch-settings"},[e("div",{staticClass:"label"},[t._v("批量设置:")]),e("kdx-rr-input",{staticClass:"width-280",attrs:{placeholder:"价格",number:"",fixed:2,"min-value":0,"max-value":9999999.99,disabled:t.is_activity_goods},model:{value:t.batch_price,callback:function(e){t.batch_price=e},expression:"batch_price"}},[e("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])]),e("kdx-rr-input",{staticClass:"width-280",attrs:{placeholder:"库存",number:"",fixed:0,"min-value":0,"max-value":999999999,disabled:t.is_activity_goods||"2"==t.model_type},model:{value:t.batch_stock,callback:function(e){t.batch_stock=e},expression:"batch_stock"}},[e("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])]),e("Button",{attrs:{disabled:t.is_activity_goods},on:{click:t.fnBatchSet}},[t._v("应用")])],1),e("Table",{ref:"table",attrs:{border:"",columns:t.columns,data:t.data,loading:t.loading,"span-method":t.handleSpan}})],1)])};e.render=a;var n=[];e.staticRenderFns=n},"1aee":function(t,e,a){"use strict";a.r(e);var n=a("98ab"),i=a("e8b56");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("f6a0");var s=a("2877"),o=Object(s["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"798540b4",null);e["default"]=o.exports},"1e26":function(t,e,a){"use strict";a("bfa4")},"2b1d":function(t,e,a){"use strict";a("ac76")},3101:function(t,e,a){function n(t,e){var a=[];function n(e){e.forEach((function(e){if(new Set(t).has(e.value))if(e.children&&e.children.length){var i=e.children.map((function(t){return t.value})),r=i.some((function(e){return t.indexOf(e)>=0}));r||a.push(e.value),n(e.children)}else a.push(e.value);else e.children&&e.children.length&&n(e.children)}))}return n(e),a}Object.defineProperty(e,"__esModule",{value:!0}),e.formatData=n,a("d3b7"),a("159b"),a("6062"),a("3ca3"),a("ddb0"),a("d81d")},"324b":function(t,e,a){"use strict";var n=a("59da");a.o(n,"render")&&a.d(e,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"335e":function(t,e,a){"use strict";var n=a("ef4f");a.o(n,"render")&&a.d(e,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"3b02":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.Export=void 0;var i=n(a("5530")),r=a("d8cc"),s=n(a("4328")),o=a("384d"),d=n(a("1cc8")),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.log(t,"---------downloadPath"),t){var a="";if(-1===t.indexOf(r.config.base_url)){var n={baseURL:r.config.base_url,url:t};(0,d.default)(n),a=n.baseURL+n.url}else a=t;a=a.indexOf("?")>-1?a:a+"?",e=(0,i.default)((0,i.default)({},e),(0,o.getUserInfo)()),a+="&".concat(s.default.stringify(e)),window.open(a)}};e.Export=l},"43fc":function(t,e,a){"use strict";a.r(e);var n=a("1159"),i=a("09ba");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("2b1d");var s=a("2877"),o=Object(s["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"6d74bbcf",null);e["default"]=o.exports},"440a":function(t,e,a){},"583f":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(a("2909"));function r(t,e){var a=[];function n(t,r){t.forEach((function(t){var s=[].concat((0,i.default)(r),[t]);t.children&&t.children.length?n(t.children,s):e||a.push(s),e&&a.push(s)}))}return n(t,[]),a}a("d3b7"),a("159b"),a("99af")},"59da":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hint-tooltip"},[e("Poptip",{staticClass:"qrCode-tooltip",attrs:{placement:"bottom-end",transfer:!0,trigger:t.trigger,loading:t.loading},on:{"on-popper-show":t.onPopperShow},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"tab"},[e("tabbar",{attrs:{tabList:t.tabList},on:{tabContent:t.tabClick}})],1),e("div",{staticClass:"qr-code-tooltip-content"},[e("div",{staticClass:"image"},[t.qrcode_url||"h5"!=t.tabContent.id?t._e():e("qr-code",{attrs:{size:150,url:t.$media(t.url)}}),t.qrcode_url||"wxapp"!=t.tabContent.id?t._e():e("img",{attrs:{src:t.qrData.qrcode,alt:""}})],1),e("p",{staticClass:"text"},[t._v(t._s(t.tabContent.tabLink))]),e("div",{staticClass:"link"},["h5"==t.tabContent.id?e("div",[t._v(" "+t._s(t.$media(t.url))+" ")]):e("div",[t._v(t._s(t.qrData.url))])]),t.qrcode_url||"h5"!=t.tabContent.id?e("kdx-copy-text",{attrs:{text:t.qrData.url}},[e("Button",{attrs:{type:"text"}},[t._v(t._s(t.text))])],1):e("kdx-copy-text",{attrs:{text:t.$media(t.url)}},[e("Button",{class:{textNext:!t.tabContent.isShow},attrs:{type:"text"}},[t._v(t._s(t.text))])],1),t.tabContent.isShow?e("Button",{staticClass:"downCode",attrs:{type:"text"},on:{click:function(e){return t.downCode(t.id)}}},[t._v("下载二维码")]):t._e()],1)]},proxy:!0}])},[t._t("default")],2)],1)};e.render=a;var n=[];e.staticRenderFns=n},"5a40":function(t,e,a){"use strict";a("a4b2")},"5e8a":function(t,e,a){"use strict";a.r(e);var n=a("da0a"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"6dd0":function(t,e,a){function n(t,e,a){this.$children.forEach((function(i){var r=i.$options.name;r===t?i.$emit.apply(i,[e].concat(a)):n.apply(i,[t,e].concat([a]))}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b"),a("b0c0"),a("99af");var i={methods:{dispatch:function(t,e,a){var n=this.$parent||this.$root,i=n.$options.name;while(n&&(!i||i!==t))n=n.$parent,n&&(i=n.$options.name);n&&n.$emit.apply(n,[e].concat(a))},broadcast:function(t,e,a){n.call(this,t,e,a)}}};e.default=i},"6ea4":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("kdx-modal-frame",{attrs:{title:"批量分类",width:450},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOk},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[e("Form",{ref:"form_classify",staticClass:"batch-classify-modal",attrs:{model:t.model,rules:t.rules,"label-width":120}},[e("FormItem",{staticClass:"r-form-item-checkbox",attrs:{label:"添加方式：",prop:"method"}},[e("RadioGroup",{model:{value:t.model.method,callback:function(e){t.$set(t.model,"method",e)},expression:"model.method"}},[e("Radio",{attrs:{label:"0"}},[t._v(" 保留原有分类 ")]),e("Radio",{attrs:{label:"1"}},[t._v(" 替换原有分类 ")])],1),e("kdx-hint-alert",{directives:[{name:"show",rawName:"v-show",value:"1"===t.model.method,expression:"model.method === '1'"}],staticClass:"width-250",attrs:{type:"error"}},[t._v(" 替换原有分类请谨慎操作！ ")])],1),e("FormItem",{attrs:{label:"选择商品分类：",prop:"category_id"}},[e("tree-select",{staticClass:"width-250",attrs:{transfer:"",data:t.category,multiple:!0,showCheckbox:!0},on:{"change-data":t.changeData},model:{value:t.model.category_id,callback:function(e){t.$set(t.model,"category_id",e)},expression:"model.category_id"}})],1)],1)],1)};e.render=a;var n=[];e.staticRenderFns=n},"70cc":function(t,e,a){"use strict";var n=a("c4013");a.o(n,"render")&&a.d(e,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"72a5":function(t,e,a){},"77ee":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d81d"),a("d3b7"),a("159b");var i=a("d1be"),r=n(a("f431")),s={name:"BatchClassify",components:{TreeSelect:r.default},props:{currentList:{type:Array,required:!0}},data:function(){return{value:!1,model:{method:"0",category_id:[]},category:[],rules:{method:[{required:!0,message:"添加方式必填"}],category_id:[{required:!0,message:"商品分类必选"}]}}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.resetModel(),this.getCategory())},handleCancel:function(){this.setValue()},handleOk:function(){var t=this;this.$refs["form_classify"].validate((function(e){if(e){var a=t.currentList.map((function(t){return t.id})),n=Object.assign({goods_id:a},t.model);t.$api.goodsApi.setBatchClassify(n).then((function(e){0===e.error&&(t.$Message.success("商品分类设置成功"),t.setValue(),t.$emit("on-refresh"))}))}}))},getCategory:function(){var t=this;this.$api.goodsApi.goodClassifyList().then((function(e){0===e.error&&(t.category=(0,i.dealClassifyList)(e.list))}))},changeData:function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(t)&&t.forEach((function(t){t.children&&t.children.length>0&&(t.indeterminate=t.children.some((function(t){return!0===t.checked})),e(t.children))}))}e(t),this.category=t},resetModel:function(){this.model={method:"0",category_id:[]},this.$refs["form_classify"].resetFields()}}};e.default=s},"7d09":function(t,e,a){"use strict";a.r(e);var n=a("cc96"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"7e26":function(t,e,a){},"816a":function(t,e,a){"use strict";a.r(e);var n=a("82af"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"82af":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b");var i=n(a("5530")),r=n(a("f431")),s=a("d1be"),o={name:"SearchHeader",components:{TreeSelect:r.default},data:function(){return{model:{sub_shop_name:"",keywords:"",label_field:"all",category_id:[],created_at:"",sh:"",audit_created_at:"",type:"all",audit_status:"all",audit_time:""},category:[],optionData:{label_field:[{field:"all",title:"全部"},{field:"is_hot",title:"热卖"},{field:"is_new",title:"新品"},{field:"is_recommand",title:"推荐"}]},goodsType:{label_field:[{field:"all",title:"全部"},{field:0,title:"实体商品"},{field:1,title:"虚拟商品"},{field:2,title:"虚拟卡密"}]}}},created:function(){this.getCategory()},methods:{getCategory:function(){var t=this;this.$api.goodsApi.goodClassifyList().then((function(e){0===e.error&&(t.category=(0,s.dealClassifyList)(e.list))}))},showAddGoodsModal:function(){this.$emit("showAddGoodsModal")},handleSearch:function(){var t=(0,i.default)({},this.model);"all"===this.model.label_field&&(t=(0,i.default)((0,i.default)({},t),{},{label_field:""})),"all"===this.model.type&&(t=(0,i.default)((0,i.default)({},t),{},{type:""})),"all"===this.model.audit_status&&(t=(0,i.default)((0,i.default)({},t),{},{audit_status:""})),this.$emit("on-search",t)},reset:function(t){t=t||{},this.model={keywords:t.keywords||"",label_field:t.label_field?t.label_field:"all",category_id:t.category_id||[],created_at:t.created_at||"",type:void 0===t.type?"all":t.type,audit_status:void 0===t.audit_status||""===t.audit_status?"all":1*t.audit_status,sub_shop_name:t.sub_shop_name||"",audit_created_at:t.audit_created_at||"",audit_time:t.audit_time||"",sh:t.sh||""}},handleReset:function(){this.$emit("on-search",{}),this.reset()},handleExport:function(){this.$emit("on-export")},changeDate:function(t){t[0]?this.model.created_at=t:this.model.created_at=""},changeDateSh:function(t){this.model.audit_time=t},changeDateaudit_created_at:function(t){this.model.audit_created_at=t},changeData:function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(t)&&t.forEach((function(t){t.children&&t.children.length>0&&(t.indeterminate=t.children.some((function(t){return!0===t.checked})),e(t.children))}))}e(t),this.category=t}}};e.default=o},"8a9d":function(t,e,a){"use strict";a("de17")},"8ab6":function(t,e,a){"use strict";a.r(e);var n=a("0968"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"8c2d":function(t,e,a){"use strict";var n=a("6ea4");a.o(n,"render")&&a.d(e,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"8e9e":function(t,e,a){"use strict";a("0c61")},"916a":function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("kdx-modal-frame",{attrs:{title:"修改商品信息",width:450},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOk},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[e("Form",{ref:"form_info",staticClass:"edit-information-modal",attrs:{model:t.model,rules:t.rules,"label-width":120}},[e("FormItem",{attrs:{label:"价格：",prop:"price"}},[e("kdx-rr-input",{staticClass:"width-250",attrs:{number:"",fixed:2,"max-value":9999999.99,type:"text",disabled:t.is_activity_goods,placeholder:"商品价格"},model:{value:t.model.price,callback:function(e){t.$set(t.model,"price",e)},expression:"model.price"}},[e("span",{attrs:{slot:"append"},slot:"append"},[t._v("元")])])],1),e("FormItem",{attrs:{label:"库存：",prop:"stock"}},[e("kdx-rr-input",{staticClass:"width-250",attrs:{type:"text",number:"",fixed:0,"max-value":999999999,disabled:t.is_activity_goods||"2"==t.model_type,placeholder:"商品库存"},model:{value:t.model.stock,callback:function(e){t.$set(t.model,"stock",e)},expression:"model.stock"}},[e("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)],1)],1)};e.render=a;var n=[];e.staticRenderFns=n},"944b":function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("5530"));a("ac1f"),a("841c"),a("4e82"),a("a9e3"),a("d81d");var r=n(a("b57e")),s=n(a("0e63")),o=a("3b02"),d=a("d1be"),l={name:"index",components:{SearchHeader:r.default,TableList:s.default},data:function(){return{status:"1",params:{},page:{},search:{},table:{data:[],total:0,loading:!1},sort:{},showModal:!1}},watch:{"$route.path":{handler:function(){var t,e,a,n=this,r={inSale:1,soldOut:2,inStock:3,inRecycle:4};this.status=r[this.$route.params.id],20===+(null===(t=this.$store.state)||void 0===t||null===(e=t.account)||void 0===e||null===(a=e.shop)||void 0===a?void 0:a.shopType)&&(this.status=""),this.$history.setRoute(this.$route).getData((function(t){var e;n.page=(null===t||void 0===t?void 0:t.page)||{},n.status=(null===t||void 0===t?void 0:t.status)||n.status,n.search=(null===t||void 0===t?void 0:t.search)||{},n.sort=(null===t||void 0===t?void 0:t.sort)||{};var a=Object.assign({status:n.status},n.search,n.sort,{pagesize:n.page.pageSize||10,page:n.page.pageNumber||1}),r=(0,i.default)((0,i.default)({},n.$route.query),{},{type:Number(null===(e=n.$route.query)||void 0===e?void 0:e.type)||"all"});n.$nextTick((function(){n.reset((0,i.default)((0,i.default)({},a),r))}))}))},immediate:!0}},inject:["returnToTop"],methods:{showAddGoodsModal:function(){this.showModal=!0},addGoods:function(t){this.$router.push({path:"/goods/add",query:{type:t}}),this.showModal=!1},handleSearch:function(t){this.search=t,this.refreshTable()},handleSort:function(t){this.sort=t,this.refreshTable()},reset:function(t){var e=this;this.$nextTick((function(){e.$refs["search_header"].reset(t),e.$refs["table_list"].reset(),e.resetSearch(t)}))},getList:function(){var t,e,a,n,i,r,s=this;this.returnToTop(),this.table.loading=!0;var o=Object.assign({status:this.status},this.search,this.sort,{pagesize:this.page.pageSize,page:this.page.pageNumber});null!==(t=this.search)&&void 0!==t&&null!==(e=t.audit_created_at)&&void 0!==e&&e.length&&(this.search.audit_created_at=this.search.audit_created_at.map((function(t){return"string"==typeof t?t:(0,d.formatDate)(t,"yyyy-MM-dd hh:mm:ss")}))),null!==(a=this.search)&&void 0!==a&&null!==(n=a.audit_time)&&void 0!==n&&n.length&&(this.search.audit_time=this.search.audit_time.map((function(t){return"string"==typeof t?t:(0,d.formatDate)(t,"yyyy-MM-dd hh:mm:ss")}))),null!==(i=this.search)&&void 0!==i&&null!==(r=i.created_at)&&void 0!==r&&r.length&&(this.search.created_at=this.search.created_at.map((function(t){return"string"==typeof t?t:(0,d.formatDate)(t,"yyyy-MM-dd hh:mm:ss")}))),this.$history.setData({page:this.page,status:this.status,search:this.search,sort:this.sort}),this.$api.goodsApi.goodsList(o).then((function(t){s.table.loading=!1,0===t.error&&(s.table.data=t.list,s.table.total=t.total)})).catch()},resetSearch:function(t){this.search=(0,i.default)({},t);var e={};t.pagesize&&(e={pageSize:t.pagesize,pageNumber:t.page}),this.refreshTable(e)},refreshTable:function(t){this.page=(0,i.default)({pageSize:10,pageNumber:1},t),this.$refs["table_list"].reset(this.page),this.getList()},changePage:function(t){this.page=t,this.getList()},handleExport:function(){var t=Object.assign({status:this.status,export:"1"},this.search);(0,o.Export)("manage/goods/index/list",t)},goMoney:function(){this.$router.push({path:"/plugins/center/index"})}}};e.default=l},"98ab":function(t,e,a){"use strict";var n=a("1950");a.o(n,"render")&&a.d(e,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]}))},"9bd8":function(t,e,a){},a1fe:function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("b85c")),r=n(a("ade3")),s=n(a("5530")),o=n(a("2909"));a("a9e3"),a("d81d"),a("99af"),a("4e82"),a("ac1f"),a("1276"),a("d3b7"),a("159b"),a("b680");var d={name:"MultiSpecification",props:{model_type:{type:[Number,String]},id:{type:[Number,String]},is_activity_goods:{type:Boolean},isExternal:{type:Boolean,default:!1}},data:function(){var t=this;this.$createElement;return{value:!1,columns:[],data:[],fixColumn:[{title:"价格（元）",key:"price",render:function(e,a){return e("kdx-rr-input",{attrs:{type:"text",value:a.row[a.column.key],number:!0,fixed:2,"max-value":9999999.99,disabled:t.is_activity_goods},on:{"on-blur":function(e){t.setMultiplePrice(a.index,a.column.key,e.target.value)}}})}},{title:"库存（件）",key:"stock",render:function(e,a){return e("kdx-rr-input",{attrs:{type:"text",value:a.row[a.column.key],number:!0,fixed:0,"max-value":999999999,disabled:t.is_activity_goods||"2"==t.model_type},on:{"on-blur":function(e){t.setMultipleStock(a.index,a.column.key,e.target.value)}}})}}],specs:[],options:[],colspan:{0:1,1:1,2:1},loading:!1,batch_price:0,batch_stock:0}},methods:{setValue:function(){this.value=!this.value,this.batch_price=0,this.batch_stock=0,this.value&&this.getGoodsData()},getGoodsData:function(){var t=this;this.loading=!0,this.$api.goodsApi.getGoodInformation({id:this.id}).then((function(e){t.loading=!1,0===e.error&&(t.specs=e.data.spec,t.initColumns(),t.initTable(e.data.options),t.initColspan())}))},initColumns:function(){this.$createElement;var t=this.specs.map((function(t,e){return{title:t.title,key:"",render:function(t,a){return t("div",[a.row.childSpecVal[e]])}}}));this.columns=[].concat((0,o.default)(t),(0,o.default)(this.fixColumn))},initTable:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>1?this.data=e.sort((function(t,e){for(var a=t.specs.split(",").map((function(t){return parseInt(t)})),n=e.specs.split(",").map((function(t){return parseInt(t)})),i=Math.min(a.length,n.length),r=0;r<i;r++)if(a[r]!==n[r])return a[r]-n[r]})):this.data=e,this.data.forEach((function(e){var a=[];t.specs.forEach((function(t){t.items.forEach((function(t){e.specs.indexOf(t.id)>-1&&a.push(t.title)}))})),e.childSpecVal=a}))},initColspan:function(){for(var t=this,e={0:0,1:0,2:0},a=function(a){for(var n=1,i=t.specs.length-1;i>a;i--)n*=t.specs[i].items.length;e=(0,s.default)((0,s.default)({},e),{},(0,r.default)({},a,n))},n=0;n<this.specs.length;n++)a(n);this.colspan=e},setMultiplePrice:function(t,e,a){var n=this;this.data[t][e]="";var i="";parseFloat(a)&&(i=parseFloat(a).toFixed(2)),this.$nextTick((function(){n.data[t][e]=i}))},setMultipleStock:function(t,e,a){var n=this;this.$nextTick((function(){n.data[t][e]=a}))},fnBatchSet:function(){var t=this;(parseFloat(this.batch_price)||0===parseFloat(this.batch_price))&&this.data.forEach((function(e){e.price=parseFloat(t.batch_price)})),!parseFloat(this.batch_stock)&&0!==parseFloat(this.batch_stock)||2==this.model_type||this.data.forEach((function(e){e.stock=parseFloat(t.batch_stock)}))},handleCancel:function(){this.setValue()},handleOk:function(){var t=this;this.validate()&&(this.loading=!0,this.$api.goodsApi.editInformation(this.getParams()).then((function(e){t.loading=!1,0===e.error&&(t.isExternal||(t.$Message.success("保存成功"),t.setValue()),t.$emit("on-refresh"))})))},validate:function(){var t,e=!0,a=(0,i.default)(this.data);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(!n.price&&0!=n.price||!n.stock&&"0"!=n.stock){this.$Message.error("请填写完整的价格和库存"),e=!1;break}}}catch(r){a.e(r)}finally{a.f()}return e},getParams:function(){var t=this.data.map((function(t){return{id:t.id,price:t.price||0,stock:t.stock||0}}));return{goods_id:this.id,options:t}},handleSpan:function(t){var e=t.rowIndex,a=t.columnIndex,n={rowspan:0,colspan:1};return a<this.specs.length?(e%this.colspan[a]==0&&(n={rowspan:this.colspan[a],colspan:1}),n):[1,1]}}};e.default=d},a4b2:function(t,e,a){},ac76:function(t,e,a){},af1f:function(t,e,a){"use strict";var n=a("916a");a.o(n,"render")&&a.d(e,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]}))},b314:function(t,e,a){"use strict";var n=a("fef8");a.o(n,"render")&&a.d(e,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]}))},b50f4:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("kdx-modal-frame",{attrs:{title:"修改商品排序",width:450},on:{"on-cancel":t.handleCancel,"on-ok":t.handleOk},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[e("Form",{ref:"form_info",staticClass:"edit-information-modal",attrs:{model:t.model,rules:t.rules,"label-width":120}},[e("FormItem",{attrs:{label:"排序：",prop:"sort_by"}},[e("kdx-rr-input",{staticClass:"width-250",attrs:{number:"",fixed:0,"max-value":9999,type:"text",placeholder:"商品排序"},model:{value:t.model.sort_by,callback:function(e){t.$set(t.model,"sort_by",e)},expression:"model.sort_by"}})],1)],1)],1)};e.render=a;var n=[];e.staticRenderFns=n},b57e:function(t,e,a){"use strict";a.r(e);var n=a("b314"),i=a("816a");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("8e9e");var s=a("2877"),o=Object(s["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"3b90a3d2",null);e["default"]=o.exports},b98a:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"good-list"},[t._t("header"),e("search-header",{ref:"search_header",on:{showAddGoodsModal:t.showAddGoodsModal,"on-search":t.handleSearch,"on-reset":t.resetSearch,"on-export":t.handleExport}}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],ref:"goods_box",staticClass:"table-list"},[e("table-list",{ref:"table_list",attrs:{current:t.page.pageNumber,pageSize:t.page.pageSize,status:t.status,data:t.table.data,total:t.table.total},on:{"on-page-change":t.changePage,"on-refresh":t.refreshTable,"on-list":t.getList,"on-sort":t.handleSort}})],1),e("kdx-modal-frame",{attrs:{title:"添加商品-选择商品类型",footerHide:!0},on:{"on-cancel":function(e){t.showModal=!1}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[e("div",{staticClass:"modal-frame-content"},[e("ul",[e("li",{staticClass:"isHover",on:{click:function(e){return t.addGoods("0")}}},[e("div",{staticClass:"icon iconfont icon-shangpinleixing-shitishangpin-line"}),e("div",{staticClass:"name"},[t._v("实体商品")]),e("div",{staticClass:"desc"},[t._v("物流发货")])]),e("li",{staticClass:"isHover",on:{click:function(e){return t.addGoods("1")}}},[e("div",{staticClass:"icon iconfont icon-shangpinleixing-xuniwupin-line"}),e("div",{staticClass:"name"},[t._v("虚拟商品")]),e("div",{staticClass:"desc"},[t._v("无需物流")])]),e("li",{on:{click:function(e){return t.addGoods("2")}}},[e("div",{staticClass:"icon iconfont icon-xunikami"}),e("div",{staticClass:"name"},[t._v("虚拟卡密")]),e("div",{staticClass:"desc"},[t._v("自动发卡 无需物流")])])])])]),t._t("default")],2)};e.render=a;var n=[];e.staticRenderFns=n},bca8:function(t,e,a){"use strict";a.r(e);var n=a("dbfa"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},bd86:function(t,e,a){"use strict";var n=a("058a");a.o(n,"render")&&a.d(e,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]}))},bf34:function(t,e,a){"use strict";a("9bd8")},bfa4:function(t,e,a){},c4013:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("i-select",t._b({ref:"select",staticClass:"ivu-tree-select",class:t.classes,attrs:{placeholder:t.placeholder,multiple:t.multiple,"transfer-class-name":t.transferClassName,transfer:t.transfer},on:{"on-change":t.handleChange,"on-open-change":t.handleOpenChange}},"i-select",t.$attrs,!1),[e("Tree",{ref:"tree",attrs:{data:t.tmpData,multiple:t.multiple,"check-strictly":t.checkStrictly,"show-checkbox":t.multiple&&t.showCheckbox,"check-directly":t.checkDirectly,"load-data":t.loadData},on:{"on-select-change":t.handleSelectNode,"on-check-change":t.handleSelectNode}})],1)};e.render=a;var n=[];e.staticRenderFns=n},cb2b:function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("5530"));a("a9e3"),a("d81d"),a("b0c0"),a("d3b7"),a("159b");var r=n(a("f7a4")),s=n(a("0c76")),o=n(a("04c7")),d=n(a("1aee")),l=n(a("0da9")),c={name:"TableList",components:{EditInformation:r.default,EditSorting:s.default,BatchClassify:o.default,MultiSpecification:d.default,GoodsTooltip:l.default},props:{status:{type:[String,Number],default:1},data:{type:Array,default:function(){return[]}},pageSize:{type:Number,default:10},current:{type:Number,default:1},total:{type:Number,default:0}},data:function(){var t=this;this.$createElement;return{dialogvalue:"",columns:[{type:"selection",width:40,align:"center"},{title:"排序",key:"sort_by",width:100,render:function(e,a){return e("div",{class:"inventory"},[e("span",[a.row[a.column.key]]),e("span",{class:"iconfont icon-shangpinliebiao-bianji icon",on:{click:function(){t.updateSorting(a.row)}}})])}},{title:"商品",key:"shop",minWidth:260,render:function(e,a){var n,i=a.row.category||[],r=i.map((function(t){return e("span",{},t.name)}));switch(a.row.type){case"0":n={goodsName:"mark real",goodsText:"实"};break;case"1":n={goodsName:"mark virtual",goodsText:"虚"};break;case"2":n={goodsName:"mark secret",goodsText:"密"};break}return e("div",{class:"content-box"},[e("div",{class:"image"},[e("img",{attrs:{src:t.$media(a.row.thumb),alt:""},on:{error:function(e){t.replaceImage(e)}}})]),e("div",{class:"content"},[e("div",{class:"content-text",style:{display:t.shopName.id===a.row.id?"none":"-webkit-box"},on:{click:function(e){t.startUpdateShopName(a.row.id),e.stopPropagation()}}},[e("span",{class:"mark",style:{display:"1"===a.row.has_option?"inline-block":"none"}},["多"]),e("span",{class:n.goodsName},[n.goodsText]),e("span",{class:"text"},[a.row.title])]),e("Input",{ref:"update_name",attrs:{id:"update_name".concat(a.row.id),value:a.row.title,type:"textarea",autofocus:!0},style:{display:t.shopName.id===a.row.id?"block":"none"},on:{"on-change":function(e){t.changeShopName(e.target.value)},"on-focus":function(){t.changeShopName(a.row.title)},"on-blur":function(){t.endUpdateShopName(a.row)}}}),e("p",{class:"label"},[r])])])}},{title:"价格",key:"price",minWidth:100,render:function(e,a){return"1"===a.row.has_option?e("div",{class:"price"},[e("span",["￥",a.row.min_price," ~ ￥",a.row.max_price]),e("span",{class:"iconfont icon-shangpinliebiao-bianji icon",on:{click:function(){t.updateInformation(a.row)}}})]):e("div",{class:"price"},[e("span",["￥",a.row[a.column.key]]),e("span",{class:"iconfont icon-shangpinliebiao-bianji icon",on:{click:function(){t.updateInformation(a.row)}}})])}},{title:"库存",key:"stock",minWidth:90,render:function(e,a){var n="3"==a.row.type?"-":t.formatData(a.row[a.column.key]);return e("div",{class:"inventory"},[e("span",[n]),e("span",{class:"iconfont icon-shangpinliebiao-bianji icon",on:{click:function(){t.updateInformation(a.row)}}})])}},{title:"实际销量",key:"real_sales",sortable:"custom",minWidth:110,render:function(t,e){return t("div",[e.row.real_sales])}},{title:"创建时间",key:"created_at",sortable:"custom",minWidth:110,render:function(t,e){return t("p",{style:"word-break:normal"},[e.row.created_at?e.row.created_at:"-"])}},{title:"营销标签",key:"marketTag",minWidth:100,render:function(e,a){return e("div",{class:"market-tag"},[e("kdx-status-text",{attrs:{type:"1"===a.row.is_new?"danger":"default"},on:{click:function(){t.editMarketLabel("is_new",a.row)}}},["新品"]),e("kdx-status-text",{attrs:{type:"1"===a.row.is_hot?"danger":"default"},on:{click:function(){t.editMarketLabel("is_hot",a.row)}}},["热卖"]),e("kdx-status-text",{attrs:{type:"1"===a.row.is_recommand?"danger":"default"},on:{click:function(){t.editMarketLabel("is_recommand",a.row)}}},["推荐"])])}},{title:"操作",key:"action",minWidth:80,render:function(e,a){var n,r,s,o=(0,i.default)({id:a.row.id,type:"single"},t.getStatusBtnHandlers.data);return"4"!=t.status&&"inStock"!=t.$route.params.id&&(n=e(l.default,{attrs:{url:t.$utils.getPreviewUrl("goods",a.row.id),text:"复制链接",id:a.row.id}},[e("Button",{attrs:{type:"text"}},["推广"])])),"4"!=t.status&&(s=e("Button",{attrs:{type:"text"},on:{click:function(){t.handleEdit(a.row,"copy")}}},["复制"])),e("div",{class:"action"},[e("Button",{attrs:{type:"text"},on:{click:function(){t.handlers(o)}}},[t.getStatusBtnHandlers.btn]),e("Button",{attrs:{type:"text"},on:{click:function(){t.handleEdit(a.row,"edit")}}},["编辑"]),n,e("Button",{attrs:{type:"text"},on:{click:function(){t.handlers({type:"single",id:a.row.id,content:"确认删除此商品？",api:4==t.status?"foreverDel":"deleteGood"})}}},["删除"]),r,s])}}],selectRows:[],isSelectAll:!1,information:{price:"",stock:"",id:""},multiple:{id:"",type:"0"},shopName:{id:-1,name:""},is_activity_goods:!1,isFullGoods:!1}},computed:{getTableData:function(){return this.data.map((function(t){return t}))},getStatusBtnHandlers:function(){var t="",e={};return 1==this.status||2==this.status?(t="下架",e={content:"确认下架?",api:"batchSoldOut"}):3==this.status?(t="上架",e={content:"确认上架?",api:"launch"}):4==this.status&&(t="恢复",e={content:"确认恢复?",api:"recover"}),{btn:t,data:e}},selectDisabled:function(){return 0===this.selectRows.length}},methods:{digCacel:function(){this.dialogvalue=""},handleBatch:function(){this.$refs["batch_classify"].setValue()},selectChange:function(t){this.selectRows=t,this.isSelectAll=this.selectRows.length===this.data.length},checkboxChange:function(t){var e=this;this.data.forEach((function(a,n){e.$set(e.data[n],"_checked",t)})),this.selectRows=t?this.data:[]},startUpdateShopName:function(t){this.shopName.id=t,this.$nextTick((function(){document.getElementById("update_name".concat(t)).getElementsByTagName("textarea")[0].focus()}))},changeShopName:function(t){this.shopName.name=t},endUpdateShopName:function(t){var e=this;this.shopName.id=-1,this.$api.goodsApi.editGoodAttribute({id:t.id,field:"title",value:this.shopName.name}).then((function(t){0===t.error&&(e.$Message.success("商品名称修改成功"),e.$emit("on-refresh"),e.initFooterData())}))},updateInformation:function(t){var e=this;this.is_activity_goods=1==(null===t||void 0===t?void 0:t.is_activity_goods),this.isFullGoods=1==t.is_full_reduce,"0"===t.has_option?(this.information.price=t.price,this.information.stock=t.stock,this.information.id=t.id,this.information.type=t.type,this.$nextTick((function(){e.$refs["edit_information"].setValue()}))):"1"===t.has_option&&(this.multiple.id=t.id,this.multiple.type=t.type,this.$nextTick((function(){e.$refs["multi_specification"].setValue()})))},updateSorting:function(t){var e=this;this.is_activity_goods=1==(null===t||void 0===t?void 0:t.is_activity_goods),this.information.sort_by=t.sort_by,this.information.id=t.id,this.information.type=t.type,this.$nextTick((function(){e.$refs["edit_sorting"].setValue()}))},editMarketLabel:function(t,e){var a=this,n="0"===e[t]?"1":"0";this.$api.goodsApi.editGoodAttribute({id:e.id,field:t,value:n}).then((function(t){0===t.error&&a.handleList()}))},handlers:function(t){var e=this,a=t.type,n=t.id,i=t.content,r=t.api,s=t.status,o=[];"single"===a?o=[n]:"multiple"===a&&(o=this.selectRows.map((function(t){return t.id}))),this.$Modal.confirm({title:"提示",content:i,onOk:function(){e.$api.goodsApi[r]({id:o,status:s,reason:"",audit_id:[n]}).then((function(t){0===t.error&&e.handleRefresh()}))},onCancel:function(){}})},handleEdit:function(t,e){this.$router.push({path:"/goods/add",query:{id:t.id,sb:t.sub_shop_id,operate:e,status:this.status}})},handleList:function(){this.$emit("on-list"),this.initFooterData()},handleRefresh:function(){this.$emit("on-refresh"),this.initFooterData(),this.reset()},reset:function(t){this.$refs["page"].reset(t)},changePage:function(t){this.$emit("on-page-change",t),this.initFooterData()},formatData:function(t){return parseInt(t)<9999?t:"9999+"},initFooterData:function(){this.isSelectAll=!1,this.selectRows=[]},changeSort:function(t){var e=t.key,a=t.order;"normal"===a?this.$emit("on-sort",{}):this.$emit("on-sort",{sort:e,by:a})}}};e.default=c},cc96:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var n={name:"EditInformation",props:{model_type:{type:[Number,String]},price:{type:[Number,String]},stock:{type:[Number,String]},id:{type:[Number,String]},is_activity_goods:{type:Boolean},isExternal:{type:Boolean,default:!1}},data:function(){return{value:!1,model:{price:"",stock:""},rules:{price:[{required:!0,message:"价格必填"}],stock:[{required:!0,message:"库存必填"}]}}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.model={price:this.price,stock:this.stock})},handleCancel:function(){this.setValue()},handleOk:function(){var t=this;this.$refs["form_info"].validate((function(e){if(e){var a=Object.assign({goods_id:t.id},t.model);t.$api.goodsApi.editInformation(a).then((function(e){0===e.error&&(!t.isExternal&&t.setValue(),t.$emit("on-refresh"))}))}}))}}};e.default=n},cf31:function(t,e,a){"use strict";a("440a")},d215:function(t,e,a){"use strict";a.r(e);var n=a("77ee"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},d4a9:function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("53ca"));a("a9e3"),a("e9c4"),a("d81d"),a("d3b7"),a("159b"),a("4de4"),a("a15b");var r=n(a("6dd0")),s=n(a("583f")),o=a("3101"),d=[],l={name:"TreeSelect",mixins:[r.default],props:{value:{type:[String,Number,Array]},data:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},loadData:{type:Function},transfer:{type:Boolean,default:function(){return!(!this.$IVIEWPRO||""===this.$IVIEWPRO.transfer)&&this.$IVIEWPRO.transfer}},checkStrictly:{type:Boolean,default:!1},checkDirectly:{type:Boolean,default:!0},placeholder:{type:String,default:"请选择"},isHandlePath:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value,isChangeValueInTree:!1,isValueChangeByTree:!1,tmpData:[]}},watch:{value:{handler:function(t){var e;this.isChangeValueInTree?this.isChangeValueInTree=!1:(this.currentValue=t,null===(e=this.$refs.select)||void 0===e||e.reset(),d=(0,s.default)(this.data,this.isHandlePath),this.handleUpdateTreeNodes(this.tmpData,!0),this.tmpData=JSON.parse(JSON.stringify(this.tmpData)))},deep:!0},data:{handler:function(){var t;(this.tmpData=JSON.parse(JSON.stringify(this.data)),d=(0,s.default)(this.data,this.isHandlePath),this.isChangeValueInTree)?this.isChangeValueInTree=!1:(null===(t=this.$refs.select)||void 0===t||t.reset(),this.handleUpdateTreeNodes(this.tmpData,!0))},deep:!0}},computed:{valueToArray:function(){return"object"===(0,i.default)(this.currentValue)?this.isHandlePath?(0,o.formatData)(this.currentValue,this.tmpData):this.currentValue:[this.currentValue]},isCheckboxUsable:function(){return this.multiple&&this.showCheckbox},transferClassName:function(){return this.transfer?"ivu-tree-select-transfer":""},classes:function(){return{"ivu-tree-select-with-checkbox":this.showCheckbox}}},methods:{handleSelectNode:function(t,e){if(this.$emit("change-data",this.tmpData),this.multiple)t.length?(this.currentValue=t.map((function(t){return t.value})),this.handleUpdateSelectValue(e.value,e.title)):(this.currentValue=[],this.handleUpdateSelectValue("","")),this.traverseData(this.tmpData,this.currentValue);else if(t.length){var a=t[0];this.currentValue=a.value,this.handleUpdateSelectValue(a.value,a.title)}else this.currentValue="",this.handleUpdateSelectValue("","");this.isChangeValueInTree=!0,this.$emit("input",this.currentValue),this.$emit("on-change",this.currentValue),this.dispatch("FormItem","on-form-change",this.currentValue)},handleUpdateTreeNodes:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.forEach((function(t){e.valueToArray.indexOf(t.value)>=0?(e.isCheckboxUsable?t.checked=!0:t.selected=!0,e.handleUpdateSelectValue(t.value,t.title)):e.isCheckboxUsable?t.checked=!1:t.selected=!1,t.children&&t.children.length&&e.handleUpdateTreeNodes(t.children)})),a&&this.$refs.select&&(this.$refs.select.isFocused=!1)},handleUpdateSelectValue:function(t){if(""===t){var e;null===(e=this.$refs.select)||void 0===e||e.reset()}else{this.isValueChangeByTree=!0;var a=d.filter((function(e){return e[e.length-1].value==t}))[0];a&&a.length>0&&this.$refs.select&&this.$refs.select.onOptionClick({value:t,label:a.map((function(t){return t.title})).join("->")||""}),this.multiple||(this.isValueChangeByTree=!1)}},handleChange:function(t){var e,a=this;this.isValueChangeByTree?this.isValueChangeByTree=!1:(this.currentValue=t,this.$emit("input",t),this.$emit("on-change",t),this.dispatch("FormItem","on-form-change",t),null===(e=this.$refs.select)||void 0===e||e.reset(),this.handleUpdateTreeNodes(this.tmpData,!0),this.$emit("change-data",this.tmpData),this.$nextTick((function(){a.isValueChangeByTree=!1})))},handleOpenChange:function(t){this.$emit("on-open-change",t)},traverseData:function(t,e){var a=this;t.forEach((function(t){e.indexOf(t.value)>-1?t.checked=!0:t.checked=!1,t.children&&t.children.length>0&&a.traverseData(t.children,e)}))}},mounted:function(){var t;null!==(t=this.data)&&void 0!==t&&t.length&&(this.tmpData=JSON.parse(JSON.stringify(this.data))),d=(0,s.default)(this.data,this.isHandlePath),this.handleUpdateTreeNodes(this.data,!0)}};e.default=l},da0a:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"Tabbar",props:{tabList:{type:Array,default:function(){return[]}}},data:function(){return{type:0,tabCent:{id:"h5",tabTit:"h5",tabLink:"商品链接",isShow:!1}}},methods:{tabClick:function(t){this.tabCent.id=t.id,this.$emit("tabContent",t)}}};e.default=a},dbfa:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var n={name:"EditSorting",props:{model_type:{type:[Number,String]},sort_by:{type:[Number,String]},id:{type:[Number,String]},is_activity_goods:{type:Boolean},isExternal:{type:Boolean,default:!1}},data:function(){return{value:!1,model:{sort_by:""},rules:{sort_by:[{required:!0,message:"排序必填"}]}}},methods:{setValue:function(){this.value=!this.value,this.value&&(this.model={sort_by:this.sort_by})},handleCancel:function(){this.setValue()},handleOk:function(){var t=this;this.$refs["form_info"].validate((function(e){if(e){var a={id:t.id,field:"sort_by",value:t.model.sort_by};t.$api.goodsApi.editGoodAttribute(a).then((function(e){0===e.error&&(!t.isExternal&&t.setValue(),t.$emit("on-refresh"))}))}}))}}};e.default=n},dc90:function(t,e,a){"use strict";a("7e26")},de17:function(t,e,a){},e8b56:function(t,e,a){"use strict";a.r(e);var n=a("a1fe"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},ed26:function(t,e,a){"use strict";a.r(e);var n=a("d4a9"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},ef4f:function(t,e,a){var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var i=n(a("5530")),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"good-list-table-list"},[e("Table",{ref:"table",attrs:{columns:t.columns,data:t.getTableData},on:{"on-selection-change":t.selectChange,"on-sort-change":t.changeSort}}),e("GoodsTooltip",{attrs:{transfer:!1}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.getTableData.length>0,expression:"getTableData.length > 0"}],staticClass:"footer-action"},[e("Checkbox",{on:{"on-change":t.checkboxChange},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}}),t.getStatusBtnHandlers.btn?e("Button",{attrs:{disabled:t.selectDisabled},on:{click:function(e){return t.handlers((0,i.default)({type:"multiple"},t.getStatusBtnHandlers.data))}}},[t._v(t._s(t.getStatusBtnHandlers.btn))]):t._e(),e("Button",{attrs:{disabled:t.selectDisabled},on:{click:function(e){return t.handlers({type:"multiple",content:"确认删除？",api:4==t.status?"foreverDel":"deleteGood"})}}},[t._v("删除")]),e("Button",{attrs:{disabled:t.selectDisabled},on:{click:t.handleBatch}},[t._v("批量分类")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.getTableData.length>0,expression:"getTableData.length > 0"}],staticClass:"footer-page"},[e("kdx-page-component",{ref:"page",attrs:{current:t.current,pageSize:t.pageSize,total:t.total},on:{"on-change":t.changePage}})],1),e("edit-information",{ref:"edit_information",attrs:{model_type:t.information.type,price:t.information.price,stock:t.information.stock,id:t.information.id,is_activity_goods:t.is_activity_goods&&!t.isFullGoods},on:{"on-refresh":t.handleList}}),e("edit-sorting",{ref:"edit_sorting",attrs:{model_type:t.information.type,id:t.information.id,sort_by:t.information.sort_by,is_activity_goods:t.is_activity_goods},on:{"on-refresh":t.handleList}}),e("batch-classify",{ref:"batch_classify",attrs:{"current-list":t.selectRows},on:{"on-refresh":t.handleRefresh}}),e("multi-specification",{ref:"multi_specification",attrs:{id:t.multiple.id,model_type:t.multiple.type,is_activity_goods:t.is_activity_goods&&!t.isFullGoods},on:{"on-refresh":t.handleList}})],1)};e.render=r;var s=[];e.staticRenderFns=s},f431:function(t,e,a){"use strict";a.r(e);var n=a("70cc"),i=a("ed26");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var s=a("2877"),o=Object(s["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,null,null);e["default"]=o.exports},f6a0:function(t,e,a){"use strict";a("72a5")},f7a4:function(t,e,a){"use strict";a.r(e);var n=a("af1f"),i=a("7d09");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("dc90");var s=a("2877"),o=Object(s["a"])(i["default"],n["render"],n["staticRenderFns"],!1,null,"4a11ad90",null);e["default"]=o.exports},f7c7:function(t,e,a){"use strict";var n=a("b50f4");a.o(n,"render")&&a.d(e,"render",(function(){return n["render"]})),a.o(n,"staticRenderFns")&&a.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]}))},faa4:function(t,e,a){"use strict";a.r(e);var n=a("cb2b"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},fef8:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;var a=function(){var t=this,e=t._self._c;return e("kdx-header-bar",{scopedSlots:t._u([{key:"header",fn:function(){return[e("Button",{attrs:{type:"primary"},on:{click:t.showAddGoodsModal}},[t._v("+添加商品")])]},proxy:!0}])},[e("Form",{ref:"form",attrs:{model:t.model,"label-width":100,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[[e("FormItem",{attrs:{label:"商品名称："}},[e("Input",{staticClass:"width-340",attrs:{type:"text",placeholder:"商品名称/编码/条码"},on:{"on-enter":t.handleSearch},model:{value:t.model.keywords,callback:function(e){t.$set(t.model,"keywords",e)},expression:"model.keywords"}})],1),e("FormItem",{attrs:{label:"营销标签："}},[e("Select",{staticClass:"width-160",model:{value:t.model.label_field,callback:function(e){t.$set(t.model,"label_field",e)},expression:"model.label_field"}},t._l(t.optionData.label_field,(function(a){return e("Option",{key:a.field,attrs:{value:a.field}},[t._v(t._s(a.title)+" ")])})),1)],1),e("FormItem",{attrs:{label:"商品分类："}},[e("tree-select",{staticClass:"width-160 tree-select",attrs:{placeholder:"全部",data:t.category,transfer:"",multiple:"",showCheckbox:""},on:{"change-data":t.changeData},model:{value:t.model.category_id,callback:function(e){t.$set(t.model,"category_id",e)},expression:"model.category_id"}})],1),e("FormItem",{attrs:{label:"创建时间："}},[e("DatePicker",{staticClass:"width-340",attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"商品创建时间"},on:{"on-change":t.changeDate},model:{value:t.model.created_at,callback:function(e){t.$set(t.model,"created_at",e)},expression:"model.created_at"}})],1),e("FormItem",{attrs:{label:"商品类型："}},[e("Select",{staticClass:"width-160",model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},t._l(t.goodsType.label_field,(function(a){return e("Option",{key:a.field,attrs:{value:a.field}},[t._v(t._s(a.title)+" ")])})),1)],1)],e("div",{staticClass:"ivu-form-item-btn"},[e("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),e("Button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")]),e("Button",{attrs:{type:"text"},on:{click:t.handleExport}},[t._v("导出")])],1)],2)],1)};e.render=a;var n=[];e.staticRenderFns=n}}]);